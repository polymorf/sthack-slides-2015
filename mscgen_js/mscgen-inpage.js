/**
 * @license almond 0.3.0 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/*
 This file is part of mscgen_js.

 mscgen_js is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 mscgen_js is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with mscgen_js.  If not, see <http://www.gnu.org/licenses/>.
 */

(function(){var e,t,n;(function(r){function v(e,t){return h.call(e,t)}function m(e,t){var n,r,i,s,o,u,a,f,c,h,p,v=t&&t.split("/"),m=l.map,g=m&&m["*"]||{};if(e&&e.charAt(0)===".")if(t){v=v.slice(0,v.length-1),e=e.split("/"),o=e.length-1,l.nodeIdCompat&&d.test(e[o])&&(e[o]=e[o].replace(d,"")),e=v.concat(e);for(c=0;c<e.length;c+=1){p=e[c];if(p===".")e.splice(c,1),c-=1;else if(p===".."){if(c===1&&(e[2]===".."||e[0]===".."))break;c>0&&(e.splice(c-1,2),c-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((v||g)&&m){n=e.split("/");for(c=n.length;c>0;c-=1){r=n.slice(0,c).join("/");if(v)for(h=v.length;h>0;h-=1){i=m[v.slice(0,h).join("/")];if(i){i=i[r];if(i){s=i,u=c;break}}}if(s)break;!a&&g&&g[r]&&(a=g[r],f=c)}!s&&a&&(s=a,u=f),s&&(n.splice(0,u,s),e=n.join("/"))}return e}function g(e,t){return function(){var n=p.call(arguments,0);return typeof n[0]!="string"&&n.length===1&&n.push(null),s.apply(r,n.concat([e,t]))}}function y(e){return function(t){return m(t,e)}}function b(e){return function(t){a[e]=t}}function w(e){if(v(f,e)){var t=f[e];delete f[e],c[e]=!0,i.apply(r,t)}if(!v(a,e)&&!v(c,e))throw new Error("No "+e);return a[e]}function E(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function S(e){return function(){return l&&l.config&&l.config[e]||{}}}var i,s,o,u,a={},f={},l={},c={},h=Object.prototype.hasOwnProperty,p=[].slice,d=/\.js$/;o=function(e,t){var n,r=E(e),i=r[0];return e=r[1],i&&(i=m(i,t),n=w(i)),i?n&&n.normalize?e=n.normalize(e,y(t)):e=m(e,t):(e=m(e,t),r=E(e),i=r[0],e=r[1],i&&(n=w(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},u={require:function(e){return g(e)},exports:function(e){var t=a[e];return typeof t!="undefined"?t:a[e]={}},module:function(e){return{id:e,uri:"",exports:a[e],config:S(e)}}},i=function(e,t,n,i){var s,l,h,p,d,m=[],y=typeof n,E;i=i||e;if(y==="undefined"||y==="function"){t=!t.length&&n.length?["require","exports","module"]:t;for(d=0;d<t.length;d+=1){p=o(t[d],i),l=p.f;if(l==="require")m[d]=u.require(e);else if(l==="exports")m[d]=u.exports(e),E=!0;else if(l==="module")s=m[d]=u.module(e);else if(v(a,l)||v(f,l)||v(c,l))m[d]=w(l);else{if(!p.p)throw new Error(e+" missing "+l);p.p.load(p.n,g(i,!0),b(l),{}),m[d]=a[l]}}h=n?n.apply(a[e],m):undefined;if(e)if(s&&s.exports!==r&&s.exports!==a[e])a[e]=s.exports;else if(h!==r||!E)a[e]=h}else e&&(a[e]=n)},e=t=s=function(e,t,n,a,f){if(typeof e=="string")return u[e]?u[e](t):w(o(e,t).f);if(!e.splice){l=e,l.deps&&s(l.deps,l.callback);if(!t)return;t.splice?(e=t,t=n,n=null):e=r}return t=t||function(){},typeof n=="function"&&(n=a,a=f),a?i(r,e,t,n):setTimeout(function(){i(r,e,t,n)},4),s},s.config=function(e){return s(e)},e._defined=a,n=function(e,t,n){t.splice||(n=t,t=[]),!v(a,e)&&!v(f,e)&&(f[e]=[e,t,n])},n.amd={jQuery:!0}})(),n("../lib/almond",function(){}),n("parse/xuparser",[],function(){function e(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function t(e,t,n,r,i,s){this.message=e,this.expected=t,this.found=n,this.offset=r,this.line=i,this.column=s,this.name="SyntaxError"}function n(e){function Mi(){return e.substring(Ti,xi)}function _i(){return Ti}function Di(){return ji(Ti).line}function Pi(){return ji(Ti).column}function Hi(e){throw Ii(null,[{type:"other",description:e}],Ti)}function Bi(e){throw Ii(e,null,Ti)}function ji(t){function n(t,n,r){var i,s;for(i=n;i<r;i++)s=e.charAt(i),s==="\n"?(t.seenCR||t.line++,t.column=1,t.seenCR=!1):s==="\r"||s==="\u2028"||s==="\u2029"?(t.line++,t.column=1,t.seenCR=!0):(t.column++,t.seenCR=!1)}return Ni!==t&&(Ni>t&&(Ni=0,Ci={line:1,column:1,seenCR:!1}),n(Ci,Ni,t),Ni=t),Ci}function Fi(e){if(xi<ki)return;xi>ki&&(ki=xi,Li=[]),Li.push(e)}function Ii(n,r,i){function s(e){var t=1;e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});while(t<e.length)e[t-1]===e[t]?e.splice(t,1):t++}function o(e,t){function n(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0180-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1080-\uFFFF]/g,function(e){return"\\u"+t(e)})}var r=new Array(e.length),i,s,o;for(o=0;o<e.length;o++)r[o]=e[o].description;return i=e.length>1?r.slice(0,-1).join(", ")+" or "+r[e.length-1]:r[0],s=t?'"'+n(t)+'"':"end of input","Expected "+i+" but "+s+" found."}var u=ji(i),a=i<e.length?e.charAt(i):null;return r!==null&&s(r),new t(n!==null?n:o(r,a),r,a,i,u.line,u.column)}function qi(){var t,n,i,s,h,p,d,v,m,g;return t=xi,n=Cs(),n!==r?(i=Ri(),i!==r?(s=Cs(),s!==r?(e.charCodeAt(xi)===123?(h=u,xi++):(h=r,Ai===0&&Fi(a)),h!==r?(p=Cs(),p!==r?(d=Ui(),d!==r?(v=Cs(),v!==r?(e.charCodeAt(xi)===125?(m=f,xi++):(m=r,Ai===0&&Fi(l)),m!==r?(g=Cs(),g!==r?(Ti=t,n=c(n,d),t=n):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o),t}function Ri(){var t;return e.substr(xi,3).toLowerCase()===h?(t=e.substr(xi,3),xi+=3):(t=r,Ai===0&&Fi(p)),t}function Ui(){var e,t,n,i,s;return e=xi,t=xi,n=zi(),n!==r&&(Ti=t,n=v(n)),t=n,t===r&&(t=d),t!==r?(n=xi,i=Vi(),i!==r&&(Ti=n,i=m(i)),n=i,n===r&&(n=d),n!==r?(i=xi,s=Ji(),s!==r&&(Ti=i,s=g(s)),i=s,i===r&&(i=d),i!==r?(t=[t,n,i],e=t):(xi=e,e=o)):(xi=e,e=o)):(xi=e,e=o),e}function zi(){var t,n,i,s,u,a;t=xi,n=xi,i=[],s=xi,u=Wi(),u!==r?(e.charCodeAt(xi)===44?(a=b,xi++):(a=r,Ai===0&&Fi(w)),a!==r?(Ti=s,u=E(u),s=u):(xi=s,s=o)):(xi=s,s=o);while(s!==r)i.push(s),s=xi,u=Wi(),u!==r?(e.charCodeAt(xi)===44?(a=b,xi++):(a=r,Ai===0&&Fi(w)),a!==r?(Ti=s,u=E(u),s=u):(xi=s,s=o)):(xi=s,s=o);return i!==r?(s=xi,u=Wi(),u!==r?(e.charCodeAt(xi)===59?(a=S,xi++):(a=r,Ai===0&&Fi(x)),a!==r?(Ti=s,u=E(u),s=u):(xi=s,s=o)):(xi=s,s=o),s!==r?(i=[i,s],n=i):(xi=n,n=o)):(xi=n,n=o),n!==r&&(Ti=t,n=T(n)),t=n,t}function Wi(){var t,n,i,s,u,a,f,l;return t=xi,n=Cs(),n!==r?(i=Xi(),i!==r?(s=Cs(),s!==r?(e.charCodeAt(xi)===61?(u=N,xi++):(u=r,Ai===0&&Fi(C)),u!==r?(a=Cs(),a!==r?(f=xi,l=ps(),l!==r&&(Ti=f,l=k(l)),f=l,f===r&&(f=xi,l=ks(),l!==r&&(Ti=f,l=L(l)),f=l,f===r&&(f=xi,l=Os(),l!==r&&(Ti=f,l=A(l)),f=l)),f!==r?(l=Cs(),l!==r?(Ti=t,n=O(i,f),t=n):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o),t}function Xi(){var t;return e.substr(xi,6).toLowerCase()===M?(t=e.substr(xi,6),xi+=6):(t=r,Ai===0&&Fi(_)),t===r&&(e.substr(xi,5).toLowerCase()===D?(t=e.substr(xi,5),xi+=5):(t=r,Ai===0&&Fi(P)),t===r&&(e.substr(xi,11).toLowerCase()===H?(t=e.substr(xi,11),xi+=11):(t=r,Ai===0&&Fi(B)),t===r&&(e.substr(xi,12).toLowerCase()===j?(t=e.substr(xi,12),xi+=12):(t=r,Ai===0&&Fi(F)),t===r&&(e.substr(xi,9).toLowerCase()===I?(t=e.substr(xi,9),xi+=9):(t=r,Ai===0&&Fi(q)))))),t}function Vi(){var t,n,i,s,u,a;t=xi,n=xi,i=[],s=xi,u=$i(),u!==r?(e.charCodeAt(xi)===44?(a=b,xi++):(a=r,Ai===0&&Fi(w)),a!==r?(Ti=s,u=R(u),s=u):(xi=s,s=o)):(xi=s,s=o);while(s!==r)i.push(s),s=xi,u=$i(),u!==r?(e.charCodeAt(xi)===44?(a=b,xi++):(a=r,Ai===0&&Fi(w)),a!==r?(Ti=s,u=R(u),s=u):(xi=s,s=o)):(xi=s,s=o);return i!==r?(s=xi,u=$i(),u!==r?(e.charCodeAt(xi)===59?(a=S,xi++):(a=r,Ai===0&&Fi(x)),a!==r?(Ti=s,u=R(u),s=u):(xi=s,s=o)):(xi=s,s=o),s!==r?(i=[i,s],n=i):(xi=n,n=o)):(xi=n,n=o),n!==r&&(Ti=t,n=U(n)),t=n,t}function $i(){var t,n,i,s,u,a,f,l;return Ai++,t=xi,n=Cs(),n!==r?(i=vs(),i!==r?(s=Cs(),s!==r?(u=xi,e.charCodeAt(xi)===91?(a=W,xi++):(a=r,Ai===0&&Fi(X)),a!==r?(f=ls(),f!==r?(e.charCodeAt(xi)===93?(l=V,xi++):(l=r,Ai===0&&Fi($)),l!==r?(Ti=u,a=J(f),u=a):(xi=u,u=o)):(xi=u,u=o)):(xi=u,u=o),u===r&&(u=d),u!==r?(a=Cs(),a!==r?(Ti=t,n=K(i,u),t=n):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o),Ai--,t===r&&(n=r,Ai===0&&Fi(z)),t}function Ji(){var t,n,i,s,u;t=[],n=xi,i=Ki(),i!==r?(s=Cs(),s!==r?(e.charCodeAt(xi)===59?(u=S,xi++):(u=r,Ai===0&&Fi(x)),u!==r?(Ti=n,i=J(i),n=i):(xi=n,n=o)):(xi=n,n=o)):(xi=n,n=o);if(n!==r)while(n!==r)t.push(n),n=xi,i=Ki(),i!==r?(s=Cs(),s!==r?(e.charCodeAt(xi)===59?(u=S,xi++):(u=r,Ai===0&&Fi(x)),u!==r?(Ti=n,i=J(i),n=i):(xi=n,n=o)):(xi=n,n=o)):(xi=n,n=o);else t=o;return t}function Ki(){var t,n,i,s,u,a,f;t=xi,n=xi,i=[],s=xi,u=Qi(),u!==r?(a=Cs(),a!==r?(e.charCodeAt(xi)===44?(f=b,xi++):(f=r,Ai===0&&Fi(w)),f!==r?(Ti=s,u=J(u),s=u):(xi=s,s=o)):(xi=s,s=o)):(xi=s,s=o);while(s!==r)i.push(s),s=xi,u=Qi(),u!==r?(a=Cs(),a!==r?(e.charCodeAt(xi)===44?(f=b,xi++):(f=r,Ai===0&&Fi(w)),f!==r?(Ti=s,u=J(u),s=u):(xi=s,s=o)):(xi=s,s=o)):(xi=s,s=o);return i!==r?(s=xi,u=Qi(),u!==r&&(Ti=s,u=Q(u)),s=u,s!==r?(i=[i,s],n=i):(xi=n,n=o)):(xi=n,n=o),n!==r&&(Ti=t,n=G(n)),t=n,t}function Qi(){var e;return e=Gi(),e===r&&(e=ts()),e}function Gi(){var t,n,i,s,u,a;return t=xi,n=xi,i=Yi(),i!==r&&(Ti=n,i=J(i)),n=i,n===r&&(n=xi,i=es(),i!==r&&(Ti=n,i=J(i)),n=i,n===r&&(n=xi,i=Zi(),i!==r&&(Ti=n,i=J(i)),n=i)),n!==r?(i=xi,e.charCodeAt(xi)===91?(s=W,xi++):(s=r,Ai===0&&Fi(X)),s!==r?(u=ls(),u!==r?(e.charCodeAt(xi)===93?(a=V,xi++):(a=r,Ai===0&&Fi($)),a!==r?(Ti=i,s=Y(u),i=s):(xi=i,i=o)):(xi=i,i=o)):(xi=i,i=o),i===r&&(i=d),i!==r?(Ti=t,n=Z(n,i),t=n):(xi=t,t=o)):(xi=t,t=o),t}function Yi(){var e,t,n,i;return e=xi,t=Cs(),t!==r?(n=ns(),n!==r?(i=Cs(),i!==r?(Ti=e,t=et(n),e=t):(xi=e,e=o)):(xi=e,e=o)):(xi=e,e=o),e}function Zi(){var e,t,n,i;return e=xi,t=Cs(),t!==r?(n=rs(),n!==r?(i=Cs(),i!==r?(Ti=e,t=et(n),e=t):(xi=e,e=o)):(xi=e,e=o)):(xi=e,e=o),e}function es(){var t,n,i,s,u,a,f,l;return t=xi,n=Cs(),n!==r?(i=vs(),i!==r?(s=Cs(),s!==r?(u=is(),u!==r?(a=Cs(),a!==r?(f=vs(),f!==r?(l=Cs(),l!==r?(Ti=t,n=tt(i,u,f),t=n):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o),t===r&&(t=xi,n=Cs(),n!==r?(e.charCodeAt(xi)===42?(i=nt,xi++):(i=r,Ai===0&&Fi(rt)),i!==r?(s=Cs(),s!==r?(u=us(),u!==r?(a=Cs(),a!==r?(f=vs(),f!==r?(l=Cs(),l!==r?(Ti=t,n=it(u,f),t=n):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o),t===r&&(t=xi,n=Cs(),n!==r?(i=vs(),i!==r?(s=Cs(),s!==r?(u=os(),u!==r?(a=Cs(),a!==r?(e.charCodeAt(xi)===42?(f=nt,xi++):(f=r,Ai===0&&Fi(rt)),f!==r?(l=Cs(),l!==r?(Ti=t,n=st(i,u),t=n):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o))),t}function ts(){var t,n,i,s,c,h,p,v,m,g,y,b,w,E,S,x;return t=xi,n=Cs(),n!==r?(i=vs(),i!==r?(s=Cs(),s!==r?(c=fs(),c!==r?(h=Cs(),h!==r?(p=vs(),p!==r?(v=Cs(),v!==r?(m=xi,e.charCodeAt(xi)===91?(g=W,xi++):(g=r,Ai===0&&Fi(X)),g!==r?(y=ls(),y!==r?(e.charCodeAt(xi)===93?(b=V,xi++):(b=r,Ai===0&&Fi($)),b!==r?(Ti=m,g=Y(y),m=g):(xi=m,m=o)):(xi=m,m=o)):(xi=m,m=o),m===r&&(m=d),m!==r?(g=Cs(),g!==r?(e.charCodeAt(xi)===123?(y=u,xi++):(y=r,Ai===0&&Fi(a)),y!==r?(b=Cs(),b!==r?(w=Ji(),w!==r?(E=Cs(),E!==r?(e.charCodeAt(xi)===125?(S=f,xi++):(S=r,Ai===0&&Fi(l)),S!==r?(x=Cs(),x!==r?(Ti=t,n=ot(i,c,p,m,w),t=n):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o),t}function ns(){var t;return e.substr(xi,3)===ut?(t=ut,xi+=3):(t=r,Ai===0&&Fi(at)),t===r&&(e.substr(xi,3)===ft?(t=ft,xi+=3):(t=r,Ai===0&&Fi(lt))),t}function rs(){var t;return e.substr(xi,3)===ct?(t=ct,xi+=3):(t=r,Ai===0&&Fi(ht)),t}function is(){var e,t;return e=xi,t=ss(),t===r&&(t=os(),t===r&&(t=us(),t===r&&(t=as()))),t!==r&&(Ti=e,t=pt(t)),e=t,e}function ss(){var t,n;return Ai++,e.substr(xi,2)===vt?(t=vt,xi+=2):(t=r,Ai===0&&Fi(mt)),t===r&&(e.substr(xi,3)===gt?(t=gt,xi+=3):(t=r,Ai===0&&Fi(yt)),t===r&&(e.substr(xi,2)===bt?(t=bt,xi+=2):(t=r,Ai===0&&Fi(wt)),t===r&&(e.substr(xi,5)===Et?(t=Et,xi+=5):(t=r,Ai===0&&Fi(St)),t===r&&(e.substr(xi,3)===xt?(t=xt,xi+=3):(t=r,Ai===0&&Fi(Tt)),t===r&&(e.substr(xi,2)===Nt?(t=Nt,xi+=2):(t=r,Ai===0&&Fi(Ct)),t===r&&(e.substr(xi,4)===kt?(t=kt,xi+=4):(t=r,Ai===0&&Fi(Lt)),t===r&&(e.substr(xi,2)===At?(t=At,xi+=2):(t=r,Ai===0&&Fi(Ot)),t===r&&(e.substr(xi,3)===Mt?(t=Mt,xi+=3):(t=r,Ai===0&&Fi(_t)))))))))),Ai--,t===r&&(n=r,Ai===0&&Fi(dt)),t}function os(){var t,n;return Ai++,e.substr(xi,2)===Pt?(t=Pt,xi+=2):(t=r,Ai===0&&Fi(Ht)),t===r&&(e.substr(xi,3)===Bt?(t=Bt,xi+=3):(t=r,Ai===0&&Fi(jt)),t===r&&(e.substr(xi,2)===Ft?(t=Ft,xi+=2):(t=r,Ai===0&&Fi(It)),t===r&&(e.substr(xi,2)===qt?(t=qt,xi+=2):(t=r,Ai===0&&Fi(Rt)),t===r&&(e.substr(xi,2)===Ut?(t=Ut,xi+=2):(t=r,Ai===0&&Fi(zt)),t===r&&(e.substr(xi,2).toLowerCase()===Wt?(t=e.substr(xi,2),xi+=2):(t=r,Ai===0&&Fi(Xt))))))),Ai--,t===r&&(n=r,Ai===0&&Fi(Dt)),t}function us(){var t,n;return Ai++,e.substr(xi,2)===$t?(t=$t,xi+=2):(t=r,Ai===0&&Fi(Jt)),t===r&&(e.substr(xi,3)===Kt?(t=Kt,xi+=3):(t=r,Ai===0&&Fi(Qt)),t===r&&(e.substr(xi,2)===Gt?(t=Gt,xi+=2):(t=r,Ai===0&&Fi(Yt)),t===r&&(e.substr(xi,2)===Zt?(t=Zt,xi+=2):(t=r,Ai===0&&Fi(en)),t===r&&(e.substr(xi,2)===tn?(t=tn,xi+=2):(t=r,Ai===0&&Fi(nn)),t===r&&(e.substr(xi,2).toLowerCase()===rn?(t=e.substr(xi,2),xi+=2):(t=r,Ai===0&&Fi(sn))))))),Ai--,t===r&&(n=r,Ai===0&&Fi(Vt)),t}function as(){var t,n;return Ai++,e.substr(xi,4).toLowerCase()===un?(t=e.substr(xi,4),xi+=4):(t=r,Ai===0&&Fi(an)),t===r&&(e.substr(xi,4).toLowerCase()===fn?(t=e.substr(xi,4),xi+=4):(t=r,Ai===0&&Fi(ln)),t===r&&(e.substr(xi,4).toLowerCase()===cn?(t=e.substr(xi,4),xi+=4):(t=r,Ai===0&&Fi(hn)),t===r&&(e.substr(xi,3).toLowerCase()===pn?(t=e.substr(xi,3),xi+=3):(t=r,Ai===0&&Fi(dn))))),Ai--,t===r&&(n=r,Ai===0&&Fi(on)),t}function fs(){var t,n;return Ai++,t=xi,e.substr(xi,3).toLowerCase()===mn?(n=e.substr(xi,3),xi+=3):(n=r,Ai===0&&Fi(gn)),n===r&&(e.substr(xi,4).toLowerCase()===yn?(n=e.substr(xi,4),xi+=4):(n=r,Ai===0&&Fi(bn)),n===r&&(e.substr(xi,3).toLowerCase()===wn?(n=e.substr(xi,3),xi+=3):(n=r,Ai===0&&Fi(En)),n===r&&(e.substr(xi,5).toLowerCase()===Sn?(n=e.substr(xi,5),xi+=5):(n=r,Ai===0&&Fi(xn)),n===r&&(e.substr(xi,3).toLowerCase()===Tn?(n=e.substr(xi,3),xi+=3):(n=r,Ai===0&&Fi(Nn)),n===r&&(e.substr(xi,3).toLowerCase()===Cn?(n=e.substr(xi,3),xi+=3):(n=r,Ai===0&&Fi(kn)),n===r&&(e.substr(xi,6).toLowerCase()===Ln?(n=e.substr(xi,6),xi+=6):(n=r,Ai===0&&Fi(An)),n===r&&(e.substr(xi,3).toLowerCase()===On?(n=e.substr(xi,3),xi+=3):(n=r,Ai===0&&Fi(Mn)),n===r&&(e.substr(xi,8).toLowerCase()===_n?(n=e.substr(xi,8),xi+=8):(n=r,Ai===0&&Fi(Dn)),n===r&&(e.substr(xi,6).toLowerCase()===Pn?(n=e.substr(xi,6),xi+=6):(n=r,Ai===0&&Fi(Hn)),n===r&&(e.substr(xi,8).toLowerCase()===Bn?(n=e.substr(xi,8),xi+=8):(n=r,Ai===0&&Fi(jn)),n===r&&(e.substr(xi,6).toLowerCase()===Fn?(n=e.substr(xi,6),xi+=6):(n=r,Ai===0&&Fi(In)),n===r&&(e.substr(xi,4).toLowerCase()===qn?(n=e.substr(xi,4),xi+=4):(n=r,Ai===0&&Fi(Rn)),n===r&&(e.substr(xi,3).toLowerCase()===Un?(n=e.substr(xi,3),xi+=3):(n=r,Ai===0&&Fi(zn)),n===r&&(e.substr(xi,3).toLowerCase()===Wn?(n=e.substr(xi,3),xi+=3):(n=r,Ai===0&&Fi(Xn)))))))))))))))),n!==r&&(Ti=t,n=pt(n)),t=n,Ai--,t===r&&(n=r,Ai===0&&Fi(vn)),t}function ls(){var t,n,i,s,u,a;t=xi,n=xi,i=[],s=xi,u=cs(),u!==r?(e.charCodeAt(xi)===44?(a=b,xi++):(a=r,Ai===0&&Fi(w)),a!==r?(Ti=s,u=J(u),s=u):(xi=s,s=o)):(xi=s,s=o);while(s!==r)i.push(s),s=xi,u=cs(),u!==r?(e.charCodeAt(xi)===44?(a=b,xi++):(a=r,Ai===0&&Fi(w)),a!==r?(Ti=s,u=J(u),s=u):(xi=s,s=o)):(xi=s,s=o);return i!==r?(s=xi,u=cs(),u!==r&&(Ti=s,u=J(u)),s=u,s!==r?(i=[i,s],n=i):(xi=n,n=o)):(xi=n,n=o),n!==r&&(Ti=t,n=Vn(n)),t=n,t}function cs(){var t,n,i,s,u,a,f,l;return t=xi,n=Cs(),n!==r?(i=hs(),i!==r?(s=Cs(),s!==r?(e.charCodeAt(xi)===61?(u=N,xi++):(u=r,Ai===0&&Fi(C)),u!==r?(a=Cs(),a!==r?(f=vs(),f!==r?(l=Cs(),l!==r?(Ti=t,n=$n(i,f),t=n):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o),t}function hs(){var t,n;return Ai++,e.substr(xi,5).toLowerCase()===Kn?(t=e.substr(xi,5),xi+=5):(t=r,Ai===0&&Fi(Qn)),t===r&&(e.substr(xi,5).toLowerCase()===Gn?(t=e.substr(xi,5),xi+=5):(t=r,Ai===0&&Fi(Yn)),t===r&&(e.substr(xi,2).toLowerCase()===Zn?(t=e.substr(xi,2),xi+=2):(t=r,Ai===0&&Fi(er)),t===r&&(e.substr(xi,3).toLowerCase()===tr?(t=e.substr(xi,3),xi+=3):(t=r,Ai===0&&Fi(nr)),t===r&&(e.substr(xi,9).toLowerCase()===rr?(t=e.substr(xi,9),xi+=9):(t=r,Ai===0&&Fi(ir)),t===r&&(e.substr(xi,10).toLowerCase()===sr?(t=e.substr(xi,10),xi+=10):(t=r,Ai===0&&Fi(or)),t===r&&(e.substr(xi,9).toLowerCase()===ur?(t=e.substr(xi,9),xi+=9):(t=r,Ai===0&&Fi(ar)),t===r&&(e.substr(xi,10).toLowerCase()===fr?(t=e.substr(xi,10),xi+=10):(t=r,Ai===0&&Fi(lr)),t===r&&(e.substr(xi,11).toLowerCase()===cr?(t=e.substr(xi,11),xi+=11):(t=r,Ai===0&&Fi(hr)),t===r&&(e.substr(xi,12).toLowerCase()===pr?(t=e.substr(xi,12),xi+=12):(t=r,Ai===0&&Fi(dr)),t===r&&(e.substr(xi,12).toLowerCase()===vr?(t=e.substr(xi,12),xi+=12):(t=r,Ai===0&&Fi(mr)),t===r&&(e.substr(xi,13).toLowerCase()===gr?(t=e.substr(xi,13),xi+=13):(t=r,Ai===0&&Fi(yr)),t===r&&(e.substr(xi,12).toLowerCase()===br?(t=e.substr(xi,12),xi+=12):(t=r,Ai===0&&Fi(wr)),t===r&&(e.substr(xi,13).toLowerCase()===Er?(t=e.substr(xi,13),xi+=13):(t=r,Ai===0&&Fi(Sr)),t===r&&(e.substr(xi,14).toLowerCase()===xr?(t=e.substr(xi,14),xi+=14):(t=r,Ai===0&&Fi(Tr)),t===r&&(e.substr(xi,15).toLowerCase()===Nr?(t=e.substr(xi,15),xi+=15):(t=r,Ai===0&&Fi(Cr)),t===r&&(e.substr(xi,7).toLowerCase()===kr?(t=e.substr(xi,7),xi+=7):(t=r,Ai===0&&Fi(Lr)))))))))))))))))),Ai--,t===r&&(n=r,Ai===0&&Fi(Jn)),t}function ps(){var t,n,i,s;return t=xi,e.charCodeAt(xi)===34?(n=Ar,xi++):(n=r,Ai===0&&Fi(Or)),n!==r?(i=ds(),i!==r?(e.charCodeAt(xi)===34?(s=Ar,xi++):(s=r,Ai===0&&Fi(Or)),s!==r?(Ti=t,n=Mr(i),t=n):(xi=t,t=o)):(xi=t,t=o)):(xi=t,t=o),t}function ds(){var t,n,i,s;t=[],n=xi,i=xi,Ai++,e.charCodeAt(xi)===34?(s=Ar,xi++):(s=r,Ai===0&&Fi(Or)),Ai--,s===r?i=_r:(xi=i,i=o),i!==r?(e.substr(xi,2)===Dr?(s=Dr,xi+=2):(s=r,Ai===0&&Fi(Pr)),s===r&&(e.length>xi?(s=e.charAt(xi),xi++):(s=r,Ai===0&&Fi(Hr))),s!==r?(Ti=n,i=Br(s),n=i):(xi=n,n=o)):(xi=n,n=o);while(n!==r)t.push(n),n=xi,i=xi,Ai++,e.charCodeAt(xi)===34?(s=Ar,xi++):(s=r,Ai===0&&Fi(Or)),Ai--,s===r?i=_r:(xi=i,i=o),i!==r?(e.substr(xi,2)===Dr?(s=Dr,xi+=2):(s=r,Ai===0&&Fi(Pr)),s===r&&(e.length>xi?(s=e.charAt(xi),xi++):(s=r,Ai===0&&Fi(Hr))),s!==r?(Ti=n,i=Br(s),n=i):(xi=n,n=o)):(xi=n,n=o);return t}function vs(){var t,n,i;Ai++,t=xi,n=[],Fr.test(e.charAt(xi))?(i=e.charAt(xi),xi++):(i=r,Ai===0&&Fi(Ir));if(i!==r)while(i!==r)n.push(i),Fr.test(e.charAt(xi))?(i=e.charAt(xi),xi++):(i=r,Ai===0&&Fi(Ir));else n=o;return n!==r&&(Ti=t,n=qr(n)),t=n,t===r&&(t=ps()),Ai--,t===r&&(n=r,Ai===0&&Fi(jr)),t}function ms(){var t,n;return Ai++,t=xi,Ur.test(e.charAt(xi))?(n=e.charAt(xi),xi++):(n=r,Ai===0&&Fi(zr)),n!==r&&(Ti=t,n=Br(n)),t=n,Ai--,t===r&&(n=r,Ai===0&&Fi(Rr)),t}function gs(){var t,n;return Ai++,t=xi,Xr.test(e.charAt(xi))?(n=e.charAt(xi),xi++):(n=r,Ai===0&&Fi(Vr)),n!==r&&(Ti=t,n=Br(n)),t=n,Ai--,t===r&&(n=r,Ai===0&&Fi(Wr)),t}function ys(){var t;return e.substr(xi,2)===$r?(t=$r,xi+=2):(t=r,Ai===0&&Fi(Jr)),t}function bs(){var t;return e.substr(xi,2)===Kr?(t=Kr,xi+=2):(t=r,Ai===0&&Fi(Qr)),t}function ws(){var t,n,i;return t=xi,n=xi,Ai++,e.substr(xi,2)===Kr?(i=Kr,xi+=2):(i=r,Ai===0&&Fi(Qr)),Ai--,i===r?n=_r:(xi=n,n=o),n!==r?(e.length>xi?(i=e.charAt(xi),xi++):(i=r,Ai===0&&Fi(Hr)),i!==r?(Ti=t,n=Br(i),t=n):(xi=t,t=o)):(xi=t,t=o),t}function Es(){var e,t,n,i;e=xi,t=ys();if(t!==r){n=[],i=ws();while(i!==r)n.push(i),i=ws();n!==r?(i=bs(),i!==r?(Ti=e,t=Gr(t,n,i),e=t):(xi=e,e=o)):(xi=e,e=o)}else xi=e,e=o;return e}function Ss(){var t;return e.substr(xi,2)===Yr?(t=Yr,xi+=2):(t=r,Ai===0&&Fi(Zr)),t===r&&(e.charCodeAt(xi)===35?(t=ei,xi++):(t=r,Ai===0&&Fi(ti))),t}function xs(){var t;return ni.test(e.charAt(xi))?(t=e.charAt(xi),xi++):(t=r,Ai===0&&Fi(ri)),t}function Ts(){var e,t,n,i;e=xi,t=Ss();if(t!==r){n=[],i=xs();while(i!==r)n.push(i),i=xs();n!==r?(Ti=e,t=ii(t,n),e=t):(xi=e,e=o)}else xi=e,e=o;return e}function Ns(){var e,t;return Ai++,e=Ts(),e===r&&(e=Es()),Ai--,e===r&&(t=r,Ai===0&&Fi(si)),e}function Cs(){var e,t;e=[],t=ms(),t===r&&(t=gs(),t===r&&(t=Ns()));while(t!==r)e.push(t),t=ms(),t===r&&(t=gs(),t===r&&(t=Ns()));return e}function ks(){var e;return e=As(),e===r&&(e=Ls()),e}function Ls(){var t,n,i;Ai++,t=xi,n=[],ui.test(e.charAt(xi))?(i=e.charAt(xi),xi++):(i=r,Ai===0&&Fi(ai));if(i!==r)while(i!==r)n.push(i),ui.test(e.charAt(xi))?(i=e.charAt(xi),xi++):(i=r,Ai===0&&Fi(ai));else n=o;return n!==r&&(Ti=t,n=fi(n)),t=n,Ai--,t===r&&(n=r,Ai===0&&Fi(oi)),t}function As(){var t,n,i,s,u,a;Ai++,t=xi,n=xi,i=[],ui.test(e.charAt(xi))?(s=e.charAt(xi),xi++):(s=r,Ai===0&&Fi(ai));if(s!==r)while(s!==r)i.push(s),ui.test(e.charAt(xi))?(s=e.charAt(xi),xi++):(s=r,Ai===0&&Fi(ai));else i=o;if(i!==r){e.charCodeAt(xi)===46?(s=ci,xi++):(s=r,Ai===0&&Fi(hi));if(s!==r){u=[],ui.test(e.charAt(xi))?(a=e.charAt(xi),xi++):(a=r,Ai===0&&Fi(ai));if(a!==r)while(a!==r)u.push(a),ui.test(e.charAt(xi))?(a=e.charAt(xi),xi++):(a=r,Ai===0&&Fi(ai));else u=o;u!==r?(i=[i,s,u],n=i):(xi=n,n=o)}else xi=n,n=o}else xi=n,n=o;return n!==r&&(Ti=t,n=pi(n)),t=n,Ai--,t===r&&(n=r,Ai===0&&Fi(li)),t}function Os(){var t,n;return Ai++,e.substr(xi,4).toLowerCase()===vi?(t=e.substr(xi,4),xi+=4):(t=r,Ai===0&&Fi(mi)),t===r&&(e.substr(xi,5).toLowerCase()===gi?(t=e.substr(xi,5),xi+=5):(t=r,Ai===0&&Fi(yi)),t===r&&(e.substr(xi,2).toLowerCase()===bi?(t=e.substr(xi,2),xi+=2):(t=r,Ai===0&&Fi(wi)),t===r&&(e.substr(xi,3).toLowerCase()===Ei?(t=e.substr(xi,3),xi+=3):(t=r,Ai===0&&Fi(Si))))),Ai--,t===r&&(n=r,Ai===0&&Fi(di)),t}function Ms(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}function _s(e){var t="false";switch(e.toLowerCase()){case"true":case"on":case"1":t="true"}return t}function Ds(e,t){return t===undefined||t==="*"?!0:e&&e.entities&&t?e.entities.some(function(e){return e.name===t}):!1}function Ps(e,t){this.message="Entity '"+e+"' in arc ",this.message+="'"+t.from+" "+t.kind+" "+t.to+"' ",this.message+="is not defined.",this.name="EntityNotDefinedError"}function Hs(e,t){return e||(e={},e.entities=[]),t&&t.arcs&&t.arcs.forEach(function(t){t.forEach(function(t){if(t.from&&!Ds(e,t.from))throw new Ps(t.from,t);if(t.to&&!Ds(e,t.to))throw new Ps(t.to,t)})}),e}var n=arguments.length>1?arguments[1]:{},r={},i={program:qi},s=qi,o=r,u="{",a={type:"literal",value:"{",description:'"{"'},f="}",l={type:"literal",value:"}",description:'"}"'},c=function(e,t){t[1]=Hs(t[1],t[2]);var n=Ms(t[0],Ms(t[1],t[2]));return e.length>0&&(n=Ms({precomment:e},n)),n},h="msc",p={type:"literal",value:"msc",description:'"msc"'},d=null,v=function(e){return{options:e}},m=function(e){return{entities:e}},g=function(e){return{arcs:e}},y=[],b=",",w={type:"literal",value:",",description:'","'},E=function(e){return e},S=";",x={type:"literal",value:";",description:'";"'},T=function(e){var t={},n,r;for(n in e[0])for(r in e[0][n])t[r]=e[0][n][r];return t=Ms(t,e[1]),t},N="=",C={type:"literal",value:"=",description:'"="'},k=function(e){return e},L=function(e){return e.toString()},A=function(e){return e.toString()},O=function(e,t){var n={};return e=e.toLowerCase(),e==="wordwraparcs"?n[e]=_s(t):n[e]=t,n},M="hscale",_={type:"literal",value:"hscale",description:'"hscale"'},D="width",P={type:"literal",value:"width",description:'"width"'},H="arcgradient",B={type:"literal",value:"arcgradient",description:'"arcgradient"'},j="wordwraparcs",F={type:"literal",value:"wordwraparcs",description:'"wordwraparcs"'},I="watermark",q={type:"literal",value:"watermark",description:'"watermark"'},R=function(e){return e},U=function(e){return e[0].push(e[1]),e[0]},z={type:"other",description:"entity"},W="[",X={type:"literal",value:"[",description:'"["'},V="]",$={type:"literal",value:"]",description:'"]"'},J=function(e){return e},K=function(e,t){var n={};return n.name=e,n=Ms(n,t),n},Q=function(e){return[e]},G=function(e){return e[0].push(e[1][0]),e[0]},Y=function(e){return e},Z=function(e,t){return e=Ms(e,t),e},et=function(e){return{kind:e}},tt=function(e,t,n){return{kind:t,from:e,to:n}},nt="*",rt={type:"literal",value:"*",description:'"*"'},it=function(e,t){return{kind:e,from:"*",to:t}},st=function(e,t){return{kind:t,from:e,to:"*"}},ot=function(e,t,n,r,i){var s={kind:t,from:e,to:n,arcs:i};return s=Ms(s,r),s},ut="|||",at={type:"literal",value:"|||",description:'"|||"'},ft="...",lt={type:"literal",value:"...",description:'"..."'},ct="---",ht={type:"literal",value:"---",description:'"---"'},pt=function(e){return e.toLowerCase()},dt={type:"other",description:"bi-directional arrow"},vt="--",mt={type:"literal",value:"--",description:'"--"'},gt="<->",yt={type:"literal",value:"<->",description:'"<->"'},bt="==",wt={type:"literal",value:"==",description:'"=="'},Et="<<=>>",St={type:"literal",value:"<<=>>",description:'"<<=>>"'},xt="<=>",Tt={type:"literal",value:"<=>",description:'"<=>"'},Nt="..",Ct={type:"literal",value:"..",description:'".."'},kt="<<>>",Lt={type:"literal",value:"<<>>",description:'"<<>>"'},At="::",Ot={type:"literal",value:"::",description:'"::"'},Mt="<:>",_t={type:"literal",value:"<:>",description:'"<:>"'},Dt={type:"other",description:"left to right arrow"},Pt="->",Ht={type:"literal",value:"->",description:'"->"'},Bt="=>>",jt={type:"literal",value:"=>>",description:'"=>>"'},Ft="=>",It={type:"literal",value:"=>",description:'"=>"'},qt=">>",Rt={type:"literal",value:">>",description:'">>"'},Ut=":>",zt={type:"literal",value:":>",description:'":>"'},Wt="-x",Xt={type:"literal",value:"-x",description:'"-x"'},Vt={type:"other",description:"right to left arrow"},$t="<-",Jt={type:"literal",value:"<-",description:'"<-"'},Kt="<<=",Qt={type:"literal",value:"<<=",description:'"<<="'},Gt="<=",Yt={type:"literal",value:"<=",description:'"<="'},Zt="<<",en={type:"literal",value:"<<",description:'"<<"'},tn="<:",nn={type:"literal",value:"<:",description:'"<:"'},rn="x-",sn={type:"literal",value:"x-",description:'"x-"'},on={type:"other",description:"box"},un="note",an={type:"literal",value:"note",description:'"note"'},fn="abox",ln={type:"literal",value:"abox",description:'"abox"'},cn="rbox",hn={type:"literal",value:"rbox",description:'"rbox"'},pn="box",dn={type:"literal",value:"box",description:'"box"'},vn={type:"other",description:"arc spanning box"},mn="alt",gn={type:"literal",value:"alt",description:'"alt"'},yn="else",bn={type:"literal",value:"else",description:'"else"'},wn="opt",En={type:"literal",value:"opt",description:'"opt"'},Sn="break",xn={type:"literal",value:"break",description:'"break"'},Tn="par",Nn={type:"literal",value:"par",description:'"par"'},Cn="seq",kn={type:"literal",value:"seq",description:'"seq"'},Ln="strict",An={type:"literal",value:"strict",description:'"strict"'},On="neg",Mn={type:"literal",value:"neg",description:'"neg"'},_n="critical",Dn={type:"literal",value:"critical",description:'"critical"'},Pn="ignore",Hn={type:"literal",value:"ignore",description:'"ignore"'},Bn="consider",jn={type:"literal",value:"consider",description:'"consider"'},Fn="assert",In={type:"literal",value:"assert",description:'"assert"'},qn="loop",Rn={type:"literal",value:"loop",description:'"loop"'},Un="ref",zn={type:"literal",value:"ref",description:'"ref"'},Wn="exc",Xn={type:"literal",value:"exc",description:'"exc"'},Vn=function(e){var t={},n,r;for(n in e[0])for(r in e[0][n])t[r]=e[0][n][r];return t=Ms(t,e[1]),t},$n=function(e,t){var n={};return e=e.toLowerCase(),e=e.replace("colour","color"),n[e]=t,n},Jn={type:"other",description:"attribute name"},Kn="label",Qn={type:"literal",value:"label",description:'"label"'},Gn="idurl",Yn={type:"literal",value:"idurl",description:'"idurl"'},Zn="id",er={type:"literal",value:"id",description:'"id"'},tr="url",nr={type:"literal",value:"url",description:'"url"'},rr="linecolor",ir={type:"literal",value:"linecolor",description:'"linecolor"'},sr="linecolour",or={type:"literal",value:"linecolour",description:'"linecolour"'},ur="textcolor",ar={type:"literal",value:"textcolor",description:'"textcolor"'},fr="textcolour",lr={type:"literal",value:"textcolour",description:'"textcolour"'},cr="textbgcolor",hr={type:"literal",value:"textbgcolor",description:'"textbgcolor"'},pr="textbgcolour",dr={type:"literal",value:"textbgcolour",description:'"textbgcolour"'},vr="arclinecolor",mr={type:"literal",value:"arclinecolor",description:'"arclinecolor"'},gr="arclinecolour",yr={type:"literal",value:"arclinecolour",description:'"arclinecolour"'},br="arctextcolor",wr={type:"literal",value:"arctextcolor",description:'"arctextcolor"'},Er="arctextcolour",Sr={type:"literal",value:"arctextcolour",description:'"arctextcolour"'},xr="arctextbgcolor",Tr={type:"literal",value:"arctextbgcolor",description:'"arctextbgcolor"'},Nr="arctextbgcolour",Cr={type:"literal",value:"arctextbgcolour",description:'"arctextbgcolour"'},kr="arcskip",Lr={type:"literal",value:"arcskip",description:'"arcskip"'},Ar='"',Or={type:"literal",value:'"',description:'"\\""'},Mr=function(e){return e.join("")},_r=void 0,Dr='\\"',Pr={type:"literal",value:'\\"',description:'"\\\\\\""'},Hr={type:"any",description:"any character"},Br=function(e){return e},jr={type:"other",description:"identifier"},Fr=/^[A-Za-z_0-9]/,Ir={type:"class",value:"[A-Za-z_0-9]",description:"[A-Za-z_0-9]"},qr=function(e){return e.join("")},Rr={type:"other",description:"whitespace"},Ur=/^[ \t]/,zr={type:"class",value:"[ \\t]",description:"[ \\t]"},Wr={type:"other",description:"lineend"},Xr=/^[\r\n]/,Vr={type:"class",value:"[\\r\\n]",description:"[\\r\\n]"},$r="/*",Jr={type:"literal",value:"/*",description:'"/*"'},Kr="*/",Qr={type:"literal",value:"*/",description:'"*/"'},Gr=function(e,t,n){return e+t.join("")+n},Yr="//",Zr={type:"literal",value:"//",description:'"//"'},ei="#",ti={type:"literal",value:"#",description:'"#"'},ni=/^[^\r\n]/,ri={type:"class",value:"[^\\r\\n]",description:"[^\\r\\n]"},ii=function(e,t){return e+t.join("")},si={type:"other",description:"comment"},oi={type:"other",description:"integer"},ui=/^[0-9]/,ai={type:"class",value:"[0-9]",description:"[0-9]"},fi=function(e){return parseInt(e.join(""),10)},li={type:"other",description:"real"},ci=".",hi={type:"literal",value:".",description:'"."'},pi=function(e){return parseFloat(e.join(""))},di={type:"other",description:"boolean"},vi="true",mi={type:"literal",value:"true",description:'"true"'},gi="false",yi={type:"literal",value:"false",description:'"false"'},bi="on",wi={type:"literal",value:"on",description:'"on"'},Ei="off",Si={type:"literal",value:"off",description:'"off"'},xi=0,Ti=0,Ni=0,Ci={line:1,column:1,seenCR:!1},ki=0,Li=[],Ai=0,Oi;if("startRule"in n){if(!(n.startRule in i))throw new Error("Can't start parsing from rule \""+n.startRule+'".');s=i[n.startRule]}Oi=s();if(Oi!==r&&xi===e.length)return Oi;throw Oi!==r&&xi<e.length&&Fi({type:"end",description:"end of input"}),Ii(null,Li,ki)}return e(t,Error),{SyntaxError:t,parse:n}}),n("parse/msgennyparser",[],function(){function e(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function t(e,t,n,r,i,s){this.message=e,this.expected=t,this.found=n,this.offset=r,this.line=i,this.column=s,this.name="SyntaxError"}function n(e){function Jr(){return e.substring(Rr,qr)}function Kr(){return Rr}function Qr(){return ei(Rr).line}function Gr(){return ei(Rr).column}function Yr(e){throw ni(null,[{type:"other",description:e}],Rr)}function Zr(e){throw ni(e,null,Rr)}function ei(t){function n(t,n,r){var i,s;for(i=n;i<r;i++)s=e.charAt(i),s==="\n"?(t.seenCR||t.line++,t.column=1,t.seenCR=!1):s==="\r"||s==="\u2028"||s==="\u2029"?(t.line++,t.column=1,t.seenCR=!0):(t.column++,t.seenCR=!1)}return Ur!==t&&(Ur>t&&(Ur=0,zr={line:1,column:1,seenCR:!1}),n(zr,Ur,t),Ur=t),zr}function ti(e){if(qr<Wr)return;qr>Wr&&(Wr=qr,Xr=[]),Xr.push(e)}function ni(n,r,i){function s(e){var t=1;e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});while(t<e.length)e[t-1]===e[t]?e.splice(t,1):t++}function o(e,t){function n(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0180-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1080-\uFFFF]/g,function(e){return"\\u"+t(e)})}var r=new Array(e.length),i,s,o;for(o=0;o<e.length;o++)r[o]=e[o].description;return i=e.length>1?r.slice(0,-1).join(", ")+" or "+r[e.length-1]:r[0],s=t?'"'+n(t)+'"':"end of input","Expected "+i+" but "+s+" found."}var u=ei(i),a=i<e.length?e.charAt(i):null;return r!==null&&s(r),new t(n!==null?n:o(r,a),r,a,i,u.line,u.column)}function ri(){var e,t,n,i;return e=qr,t=Ui(),t!==r?(n=ii(),n!==r?(i=Ui(),i!==r?(Rr=e,t=u(t,n),e=t):(qr=e,e=o)):(qr=e,e=o)):(qr=e,e=o),e}function ii(){var e,t,n,i,s;return e=qr,t=qr,n=si(),n!==r&&(Rr=t,n=f(n)),t=n,t===r&&(t=a),t!==r?(n=qr,i=ai(),i!==r&&(Rr=n,i=l(i)),n=i,n===r&&(n=a),n!==r?(i=qr,s=li(),s!==r&&(Rr=i,s=c(s)),i=s,i===r&&(i=a),i!==r?(t=[t,n,i],e=t):(qr=e,e=o)):(qr=e,e=o)):(qr=e,e=o),e}function si(){var t,n,i,s,u,a;t=qr,n=qr,i=[],s=qr,u=oi(),u!==r?(e.charCodeAt(qr)===44?(a=p,qr++):(a=r,Vr===0&&ti(d)),a!==r?(Rr=s,u=v(u),s=u):(qr=s,s=o)):(qr=s,s=o);while(s!==r)i.push(s),s=qr,u=oi(),u!==r?(e.charCodeAt(qr)===44?(a=p,qr++):(a=r,Vr===0&&ti(d)),a!==r?(Rr=s,u=v(u),s=u):(qr=s,s=o)):(qr=s,s=o);return i!==r?(s=qr,u=oi(),u!==r?(e.charCodeAt(qr)===59?(a=m,qr++):(a=r,Vr===0&&ti(g)),a!==r?(Rr=s,u=v(u),s=u):(qr=s,s=o)):(qr=s,s=o),s!==r?(i=[i,s],n=i):(qr=n,n=o)):(qr=n,n=o),n!==r&&(Rr=t,n=y(n)),t=n,t}function oi(){var t,n,i,s,u,a,f,l;return t=qr,n=Ui(),n!==r?(i=ui(),i!==r?(s=Ui(),s!==r?(e.charCodeAt(qr)===61?(u=b,qr++):(u=r,Vr===0&&ti(w)),u!==r?(a=Ui(),a!==r?(f=qr,l=ki(),l!==r&&(Rr=f,l=E(l)),f=l,f===r&&(f=qr,l=zi(),l!==r&&(Rr=f,l=S(l)),f=l,f===r&&(f=qr,l=Vi(),l!==r&&(Rr=f,l=x(l)),f=l)),f!==r?(l=Ui(),l!==r?(Rr=t,n=T(i,f),t=n):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o),t}function ui(){var t;return e.substr(qr,6).toLowerCase()===N?(t=e.substr(qr,6),qr+=6):(t=r,Vr===0&&ti(C)),t===r&&(e.substr(qr,5).toLowerCase()===k?(t=e.substr(qr,5),qr+=5):(t=r,Vr===0&&ti(L)),t===r&&(e.substr(qr,11).toLowerCase()===A?(t=e.substr(qr,11),qr+=11):(t=r,Vr===0&&ti(O)),t===r&&(e.substr(qr,12).toLowerCase()===M?(t=e.substr(qr,12),qr+=12):(t=r,Vr===0&&ti(_)),t===r&&(e.substr(qr,9).toLowerCase()===D?(t=e.substr(qr,9),qr+=9):(t=r,Vr===0&&ti(P)))))),t}function ai(){var t,n,i,s,u,a;t=qr,n=qr,i=[],s=qr,u=fi(),u!==r?(e.charCodeAt(qr)===44?(a=p,qr++):(a=r,Vr===0&&ti(d)),a!==r?(Rr=s,u=H(u),s=u):(qr=s,s=o)):(qr=s,s=o);while(s!==r)i.push(s),s=qr,u=fi(),u!==r?(e.charCodeAt(qr)===44?(a=p,qr++):(a=r,Vr===0&&ti(d)),a!==r?(Rr=s,u=H(u),s=u):(qr=s,s=o)):(qr=s,s=o);return i!==r?(s=qr,u=fi(),u!==r?(e.charCodeAt(qr)===59?(a=m,qr++):(a=r,Vr===0&&ti(g)),a!==r?(Rr=s,u=H(u),s=u):(qr=s,s=o)):(qr=s,s=o),s!==r?(i=[i,s],n=i):(qr=n,n=o)):(qr=n,n=o),n!==r&&(Rr=t,n=B(n)),t=n,t}function fi(){var t,n,i,s,u,f,l,c,h;return Vr++,t=qr,n=Ui(),n!==r?(i=Mi(),i!==r?(s=Ui(),s!==r?(u=qr,e.charCodeAt(qr)===58?(f=F,qr++):(f=r,Vr===0&&ti(I)),f!==r?(l=Ui(),l!==r?(c=Ci(),c!==r?(h=Ui(),h!==r?(Rr=u,f=q(c),u=f):(qr=u,u=o)):(qr=u,u=o)):(qr=u,u=o)):(qr=u,u=o),u===r&&(u=a),u!==r?(Rr=t,n=R(i,u),t=n):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o),Vr--,t===r&&(n=r,Vr===0&&ti(j)),t}function li(){var t,n,i,s,u;t=[],n=qr,i=ci(),i!==r?(s=Ui(),s!==r?(e.charCodeAt(qr)===59?(u=m,qr++):(u=r,Vr===0&&ti(g)),u!==r?(Rr=n,i=U(i),n=i):(qr=n,n=o)):(qr=n,n=o)):(qr=n,n=o);if(n!==r)while(n!==r)t.push(n),n=qr,i=ci(),i!==r?(s=Ui(),s!==r?(e.charCodeAt(qr)===59?(u=m,qr++):(u=r,Vr===0&&ti(g)),u!==r?(Rr=n,i=U(i),n=i):(qr=n,n=o)):(qr=n,n=o)):(qr=n,n=o);else t=o;return t}function ci(){var t,n,i,s,u,a;t=qr,n=qr,i=[],s=qr,u=hi(),u!==r?(e.charCodeAt(qr)===44?(a=p,qr++):(a=r,Vr===0&&ti(d)),a!==r?(Rr=s,u=U(u),s=u):(qr=s,s=o)):(qr=s,s=o);while(s!==r)i.push(s),s=qr,u=hi(),u!==r?(e.charCodeAt(qr)===44?(a=p,qr++):(a=r,Vr===0&&ti(d)),a!==r?(Rr=s,u=U(u),s=u):(qr=s,s=o)):(qr=s,s=o);return i!==r?(s=qr,u=hi(),u!==r&&(Rr=s,u=z(u)),s=u,s!==r?(i=[i,s],n=i):(qr=n,n=o)):(qr=n,n=o),n!==r&&(Rr=t,n=W(n)),t=n,t}function hi(){var e;return e=pi(),e===r&&(e=gi()),e}function pi(){var t,n,i,s,u,f,l;return t=qr,n=qr,i=di(),i!==r&&(Rr=n,i=X(i)),n=i,n===r&&(n=qr,i=mi(),i!==r&&(Rr=n,i=V(i)),n=i,n===r&&(n=qr,i=vi(),i!==r&&(Rr=n,i=$(i)),n=i)),n!==r?(i=qr,e.charCodeAt(qr)===58?(s=F,qr++):(s=r,Vr===0&&ti(I)),s!==r?(u=Ui(),u!==r?(f=Ci(),f!==r?(l=Ui(),l!==r?(Rr=i,s=E(f),i=s):(qr=i,i=o)):(qr=i,i=o)):(qr=i,i=o)):(qr=i,i=o),i===r&&(i=a),i!==r?(Rr=t,n=J(n,i),t=n):(qr=t,t=o)):(qr=t,t=o),t}function di(){var e,t,n,i;return e=qr,t=Ui(),t!==r?(n=yi(),n!==r?(i=Ui(),i!==r?(Rr=e,t=K(n),e=t):(qr=e,e=o)):(qr=e,e=o)):(qr=e,e=o),e}function vi(){var e,t,n,i;return e=qr,t=Ui(),t!==r?(n=bi(),n!==r?(i=Ui(),i!==r?(Rr=e,t=K(n),e=t):(qr=e,e=o)):(qr=e,e=o)):(qr=e,e=o),e}function mi(){var t,n,i,s,u,a,f,l;return t=qr,n=Ui(),n!==r?(i=Mi(),i!==r?(s=Ui(),s!==r?(u=wi(),u!==r?(a=Ui(),a!==r?(f=Mi(),f!==r?(l=Ui(),l!==r?(Rr=t,n=Q(i,u,f),t=n):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o),t===r&&(t=qr,n=Ui(),n!==r?(e.charCodeAt(qr)===42?(i=G,qr++):(i=r,Vr===0&&ti(Y)),i!==r?(s=Ui(),s!==r?(u=xi(),u!==r?(a=Ui(),a!==r?(f=Mi(),f!==r?(l=Ui(),l!==r?(Rr=t,n=Z(u,f),t=n):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o),t===r&&(t=qr,n=Ui(),n!==r?(i=Mi(),i!==r?(s=Ui(),s!==r?(u=Si(),u!==r?(a=Ui(),a!==r?(e.charCodeAt(qr)===42?(f=G,qr++):(f=r,Vr===0&&ti(Y)),f!==r?(l=Ui(),l!==r?(Rr=t,n=et(i,u),t=n):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o))),t}function gi(){var t,n,i,s,u,f,l,c,h,p,d,v,m,g,y;return t=qr,n=Ui(),n!==r?(i=Mi(),i!==r?(s=Ui(),s!==r?(u=Ni(),u!==r?(f=Ui(),f!==r?(l=Mi(),l!==r?(c=Ui(),c!==r?(h=qr,e.charCodeAt(qr)===58?(p=F,qr++):(p=r,Vr===0&&ti(I)),p!==r?(d=Ui(),d!==r?(v=Ci(),v!==r?(m=Ui(),m!==r?(Rr=h,p=E(v),h=p):(qr=h,h=o)):(qr=h,h=o)):(qr=h,h=o)):(qr=h,h=o),h===r&&(h=a),h!==r?(e.charCodeAt(qr)===123?(p=tt,qr++):(p=r,Vr===0&&ti(nt)),p!==r?(d=Ui(),d!==r?(v=li(),v!==r?(m=Ui(),m!==r?(e.charCodeAt(qr)===125?(g=rt,qr++):(g=r,Vr===0&&ti(it)),g!==r?(y=Ui(),y!==r?(Rr=t,n=st(i,u,l,h,v),t=n):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o),t}function yi(){var t;return e.substr(qr,3)===ot?(t=ot,qr+=3):(t=r,Vr===0&&ti(ut)),t===r&&(e.substr(qr,3)===at?(t=at,qr+=3):(t=r,Vr===0&&ti(ft))),t}function bi(){var t;return e.substr(qr,3)===lt?(t=lt,qr+=3):(t=r,Vr===0&&ti(ct)),t}function wi(){var e,t;return e=qr,t=Ei(),t===r&&(t=Si(),t===r&&(t=xi(),t===r&&(t=Ti()))),t!==r&&(Rr=e,t=ht(t)),e=t,e}function Ei(){var t,n;return Vr++,e.substr(qr,2)===dt?(t=dt,qr+=2):(t=r,Vr===0&&ti(vt)),t===r&&(e.substr(qr,3)===mt?(t=mt,qr+=3):(t=r,Vr===0&&ti(gt)),t===r&&(e.substr(qr,2)===yt?(t=yt,qr+=2):(t=r,Vr===0&&ti(bt)),t===r&&(e.substr(qr,5)===wt?(t=wt,qr+=5):(t=r,Vr===0&&ti(Et)),t===r&&(e.substr(qr,3)===St?(t=St,qr+=3):(t=r,Vr===0&&ti(xt)),t===r&&(e.substr(qr,2)===Tt?(t=Tt,qr+=2):(t=r,Vr===0&&ti(Nt)),t===r&&(e.substr(qr,4)===Ct?(t=Ct,qr+=4):(t=r,Vr===0&&ti(kt)),t===r&&(e.substr(qr,2)===Lt?(t=Lt,qr+=2):(t=r,Vr===0&&ti(At)),t===r&&(e.substr(qr,3)===Ot?(t=Ot,qr+=3):(t=r,Vr===0&&ti(Mt)))))))))),Vr--,t===r&&(n=r,Vr===0&&ti(pt)),t}function Si(){var t,n;return Vr++,e.substr(qr,2)===Dt?(t=Dt,qr+=2):(t=r,Vr===0&&ti(Pt)),t===r&&(e.substr(qr,3)===Ht?(t=Ht,qr+=3):(t=r,Vr===0&&ti(Bt)),t===r&&(e.substr(qr,2)===jt?(t=jt,qr+=2):(t=r,Vr===0&&ti(Ft)),t===r&&(e.substr(qr,2)===It?(t=It,qr+=2):(t=r,Vr===0&&ti(qt)),t===r&&(e.substr(qr,2)===Rt?(t=Rt,qr+=2):(t=r,Vr===0&&ti(Ut)),t===r&&(e.substr(qr,2).toLowerCase()===zt?(t=e.substr(qr,2),qr+=2):(t=r,Vr===0&&ti(Wt))))))),Vr--,t===r&&(n=r,Vr===0&&ti(_t)),t}function xi(){var t,n;return Vr++,e.substr(qr,2)===Vt?(t=Vt,qr+=2):(t=r,Vr===0&&ti($t)),t===r&&(e.substr(qr,3)===Jt?(t=Jt,qr+=3):(t=r,Vr===0&&ti(Kt)),t===r&&(e.substr(qr,2)===Qt?(t=Qt,qr+=2):(t=r,Vr===0&&ti(Gt)),t===r&&(e.substr(qr,2)===Yt?(t=Yt,qr+=2):(t=r,Vr===0&&ti(Zt)),t===r&&(e.substr(qr,2)===en?(t=en,qr+=2):(t=r,Vr===0&&ti(tn)),t===r&&(e.substr(qr,2).toLowerCase()===nn?(t=e.substr(qr,2),qr+=2):(t=r,Vr===0&&ti(rn))))))),Vr--,t===r&&(n=r,Vr===0&&ti(Xt)),t}function Ti(){var t,n;return Vr++,e.substr(qr,4).toLowerCase()===on?(t=e.substr(qr,4),qr+=4):(t=r,Vr===0&&ti(un)),t===r&&(e.substr(qr,4).toLowerCase()===an?(t=e.substr(qr,4),qr+=4):(t=r,Vr===0&&ti(fn)),t===r&&(e.substr(qr,4).toLowerCase()===ln?(t=e.substr(qr,4),qr+=4):(t=r,Vr===0&&ti(cn)),t===r&&(e.substr(qr,3).toLowerCase()===hn?(t=e.substr(qr,3),qr+=3):(t=r,Vr===0&&ti(pn))))),Vr--,t===r&&(n=r,Vr===0&&ti(sn)),t}function Ni(){var t,n;return Vr++,t=qr,e.substr(qr,3).toLowerCase()===vn?(n=e.substr(qr,3),qr+=3):(n=r,Vr===0&&ti(mn)),n===r&&(e.substr(qr,4).toLowerCase()===gn?(n=e.substr(qr,4),qr+=4):(n=r,Vr===0&&ti(yn)),n===r&&(e.substr(qr,3).toLowerCase()===bn?(n=e.substr(qr,3),qr+=3):(n=r,Vr===0&&ti(wn)),n===r&&(e.substr(qr,5).toLowerCase()===En?(n=e.substr(qr,5),qr+=5):(n=r,Vr===0&&ti(Sn)),n===r&&(e.substr(qr,3).toLowerCase()===xn?(n=e.substr(qr,3),qr+=3):(n=r,Vr===0&&ti(Tn)),n===r&&(e.substr(qr,3).toLowerCase()===Nn?(n=e.substr(qr,3),qr+=3):(n=r,Vr===0&&ti(Cn)),n===r&&(e.substr(qr,6).toLowerCase()===kn?(n=e.substr(qr,6),qr+=6):(n=r,Vr===0&&ti(Ln)),n===r&&(e.substr(qr,3).toLowerCase()===An?(n=e.substr(qr,3),qr+=3):(n=r,Vr===0&&ti(On)),n===r&&(e.substr(qr,8).toLowerCase()===Mn?(n=e.substr(qr,8),qr+=8):(n=r,Vr===0&&ti(_n)),n===r&&(e.substr(qr,6).toLowerCase()===Dn?(n=e.substr(qr,6),qr+=6):(n=r,Vr===0&&ti(Pn)),n===r&&(e.substr(qr,8).toLowerCase()===Hn?(n=e.substr(qr,8),qr+=8):(n=r,Vr===0&&ti(Bn)),n===r&&(e.substr(qr,6).toLowerCase()===jn?(n=e.substr(qr,6),qr+=6):(n=r,Vr===0&&ti(Fn)),n===r&&(e.substr(qr,4).toLowerCase()===In?(n=e.substr(qr,4),qr+=4):(n=r,Vr===0&&ti(qn)),n===r&&(e.substr(qr,3).toLowerCase()===Rn?(n=e.substr(qr,3),qr+=3):(n=r,Vr===0&&ti(Un)),n===r&&(e.substr(qr,3).toLowerCase()===zn?(n=e.substr(qr,3),qr+=3):(n=r,Vr===0&&ti(Wn)))))))))))))))),n!==r&&(Rr=t,n=ht(n)),t=n,Vr--,t===r&&(n=r,Vr===0&&ti(dn)),t}function Ci(){var e;return e=ki(),e===r&&(e=Ai()),e}function ki(){var t,n,i,s;return t=qr,e.charCodeAt(qr)===34?(n=Xn,qr++):(n=r,Vr===0&&ti(Vn)),n!==r?(i=Li(),i!==r?(e.charCodeAt(qr)===34?(s=Xn,qr++):(s=r,Vr===0&&ti(Vn)),s!==r?(Rr=t,n=$n(i),t=n):(qr=t,t=o)):(qr=t,t=o)):(qr=t,t=o),t}function Li(){var t,n,i,s;t=[],n=qr,i=qr,Vr++,e.charCodeAt(qr)===34?(s=Xn,qr++):(s=r,Vr===0&&ti(Vn)),Vr--,s===r?i=Jn:(qr=i,i=o),i!==r?(e.substr(qr,2)===Kn?(s=Kn,qr+=2):(s=r,Vr===0&&ti(Qn)),s===r&&(e.length>qr?(s=e.charAt(qr),qr++):(s=r,Vr===0&&ti(Gn))),s!==r?(Rr=n,i=Yn(s),n=i):(qr=n,n=o)):(qr=n,n=o);while(n!==r)t.push(n),n=qr,i=qr,Vr++,e.charCodeAt(qr)===34?(s=Xn,qr++):(s=r,Vr===0&&ti(Vn)),Vr--,s===r?i=Jn:(qr=i,i=o),i!==r?(e.substr(qr,2)===Kn?(s=Kn,qr+=2):(s=r,Vr===0&&ti(Qn)),s===r&&(e.length>qr?(s=e.charAt(qr),qr++):(s=r,Vr===0&&ti(Gn))),s!==r?(Rr=n,i=Yn(s),n=i):(qr=n,n=o)):(qr=n,n=o);return t}function Ai(){var e,t;return e=qr,t=Oi(),t!==r&&(Rr=e,t=Zn(t)),e=t,e}function Oi(){var t,n,i,s;t=[],n=qr,i=qr,Vr++,e.charCodeAt(qr)===44?(s=p,qr++):(s=r,Vr===0&&ti(d)),s===r&&(e.charCodeAt(qr)===59?(s=m,qr++):(s=r,Vr===0&&ti(g)),s===r&&(e.charCodeAt(qr)===123?(s=tt,qr++):(s=r,Vr===0&&ti(nt)))),Vr--,s===r?i=Jn:(qr=i,i=o),i!==r?(e.length>qr?(s=e.charAt(qr),qr++):(s=r,Vr===0&&ti(Gn)),s!==r?(Rr=n,i=Yn(s),n=i):(qr=n,n=o)):(qr=n,n=o);while(n!==r)t.push(n),n=qr,i=qr,Vr++,e.charCodeAt(qr)===44?(s=p,qr++):(s=r,Vr===0&&ti(d)),s===r&&(e.charCodeAt(qr)===59?(s=m,qr++):(s=r,Vr===0&&ti(g)),s===r&&(e.charCodeAt(qr)===123?(s=tt,qr++):(s=r,Vr===0&&ti(nt)))),Vr--,s===r?i=Jn:(qr=i,i=o),i!==r?(e.length>qr?(s=e.charAt(qr),qr++):(s=r,Vr===0&&ti(Gn)),s!==r?(Rr=n,i=Yn(s),n=i):(qr=n,n=o)):(qr=n,n=o);return t}function Mi(){var t,n,i;Vr++,t=qr,n=[],tr.test(e.charAt(qr))?(i=e.charAt(qr),qr++):(i=r,Vr===0&&ti(nr));if(i!==r)while(i!==r)n.push(i),tr.test(e.charAt(qr))?(i=e.charAt(qr),qr++):(i=r,Vr===0&&ti(nr));else n=o;return n!==r&&(Rr=t,n=rr(n)),t=n,t===r&&(t=ki()),Vr--,t===r&&(n=r,Vr===0&&ti(er)),t}function _i(){var t,n;return Vr++,t=qr,sr.test(e.charAt(qr))?(n=e.charAt(qr),qr++):(n=r,Vr===0&&ti(or)),n!==r&&(Rr=t,n=Yn(n)),t=n,Vr--,t===r&&(n=r,Vr===0&&ti(ir)),t}function Di(){var t,n;return Vr++,t=qr,ar.test(e.charAt(qr))?(n=e.charAt(qr),qr++):(n=r,Vr===0&&ti(fr)),n!==r&&(Rr=t,n=Yn(n)),t=n,Vr--,t===r&&(n=r,Vr===0&&ti(ur)),t}function Pi(){var t;return e.substr(qr,2)===lr?(t=lr,qr+=2):(t=r,Vr===0&&ti(cr)),t}function Hi(){var t;return e.substr(qr,2)===hr?(t=hr,qr+=2):(t=r,Vr===0&&ti(pr)),t}function Bi(){var t,n,i;return t=qr,n=qr,Vr++,e.substr(qr,2)===hr?(i=hr,qr+=2):(i=r,Vr===0&&ti(pr)),Vr--,i===r?n=Jn:(qr=n,n=o),n!==r?(e.length>qr?(i=e.charAt(qr),qr++):(i=r,Vr===0&&ti(Gn)),i!==r?(Rr=t,n=Yn(i),t=n):(qr=t,t=o)):(qr=t,t=o),t}function ji(){var e,t,n,i;e=qr,t=Pi();if(t!==r){n=[],i=Bi();while(i!==r)n.push(i),i=Bi();n!==r?(i=Hi(),i!==r?(Rr=e,t=dr(t,n,i),e=t):(qr=e,e=o)):(qr=e,e=o)}else qr=e,e=o;return e}function Fi(){var t;return e.substr(qr,2)===vr?(t=vr,qr+=2):(t=r,Vr===0&&ti(mr)),t===r&&(e.charCodeAt(qr)===35?(t=gr,qr++):(t=r,Vr===0&&ti(yr))),t}function Ii(){var t;return br.test(e.charAt(qr))?(t=e.charAt(qr),qr++):(t=r,Vr===0&&ti(wr)),t}function qi(){var e,t,n,i;e=qr,t=Fi();if(t!==r){n=[],i=Ii();while(i!==r)n.push(i),i=Ii();n!==r?(Rr=e,t=Er(t,n),e=t):(qr=e,e=o)}else qr=e,e=o;return e}function Ri(){var e,t;return Vr++,e=qi(),e===r&&(e=ji()),Vr--,e===r&&(t=r,Vr===0&&ti(Sr)),e}function Ui(){var e,t;e=[],t=_i(),t===r&&(t=Di(),t===r&&(t=Ri()));while(t!==r)e.push(t),t=_i(),t===r&&(t=Di(),t===r&&(t=Ri()));return e}function zi(){var e;return e=Xi(),e===r&&(e=Wi()),e}function Wi(){var t,n,i;Vr++,t=qr,n=[],Tr.test(e.charAt(qr))?(i=e.charAt(qr),qr++):(i=r,Vr===0&&ti(Nr));if(i!==r)while(i!==r)n.push(i),Tr.test(e.charAt(qr))?(i=e.charAt(qr),qr++):(i=r,Vr===0&&ti(Nr));else n=o;return n!==r&&(Rr=t,n=Cr(n)),t=n,Vr--,t===r&&(n=r,Vr===0&&ti(xr)),t}function Xi(){var t,n,i,s,u,a;Vr++,t=qr,n=qr,i=[],Tr.test(e.charAt(qr))?(s=e.charAt(qr),qr++):(s=r,Vr===0&&ti(Nr));if(s!==r)while(s!==r)i.push(s),Tr.test(e.charAt(qr))?(s=e.charAt(qr),qr++):(s=r,Vr===0&&ti(Nr));else i=o;if(i!==r){e.charCodeAt(qr)===46?(s=Lr,qr++):(s=r,Vr===0&&ti(Ar));if(s!==r){u=[],Tr.test(e.charAt(qr))?(a=e.charAt(qr),qr++):(a=r,Vr===0&&ti(Nr));if(a!==r)while(a!==r)u.push(a),Tr.test(e.charAt(qr))?(a=e.charAt(qr),qr++):(a=r,Vr===0&&ti(Nr));else u=o;u!==r?(i=[i,s,u],n=i):(qr=n,n=o)}else qr=n,n=o}else qr=n,n=o;return n!==r&&(Rr=t,n=Or(n)),t=n,Vr--,t===r&&(n=r,Vr===0&&ti(kr)),t}function Vi(){var t,n;return Vr++,e.substr(qr,4).toLowerCase()===_r?(t=e.substr(qr,4),qr+=4):(t=r,Vr===0&&ti(Dr)),t===r&&(e.substr(qr,5).toLowerCase()===Pr?(t=e.substr(qr,5),qr+=5):(t=r,Vr===0&&ti(Hr)),t===r&&(e.substr(qr,2).toLowerCase()===Br?(t=e.substr(qr,2),qr+=2):(t=r,Vr===0&&ti(jr)),t===r&&(e.substr(qr,3).toLowerCase()===Fr?(t=e.substr(qr,3),qr+=3):(t=r,Vr===0&&ti(Ir))))),Vr--,t===r&&(n=r,Vr===0&&ti(Mr)),t}function $i(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}function Ji(e){var t="false";switch(e.toLowerCase()){case"true":case"on":case"1":t="true"}return t}function Ki(e,t,n){return t===undefined||t==="*"?!0:e&&e.entities&&t&&e.entities.some(function(e){return e.name===t})?!0:n?n[t]===!0:!1}function Qi(e){var t={};return t.name=e,t}function Gi(e,t,n){return e||(e={},e.entities=[]),n||(n={}),t&&t.arcs&&t.arcs.forEach(function(t){t.forEach(function(t){Ki(e,t.from,n)||(e.entities[e.entities.length]=Qi(t.from)),t.arcs&&(n[t.to]=!0,$i(e,Gi(e,t,n)),delete n[t.to]),Ki(e,t.to,n)||(e.entities[e.entities.length]=Qi(t.to))})}),e}var n=arguments.length>1?arguments[1]:{},r={},i={program:ri},s=ri,o=r,u=function(e,t){t[1]=Gi(t[1],t[2]);var n=$i(t[0],$i(t[1],t[2]));return e.length>0&&(n=$i({precomment:e},n)),n},a=null,f=function(e){return{options:e}},l=function(e){return{entities:e}},c=function(e){return{arcs:e}},h=[],p=",",d={type:"literal",value:",",description:'","'},v=function(e){return e},m=";",g={type:"literal",value:";",description:'";"'},y=function(e){var t={},n,r;for(n in e[0])for(r in e[0][n])t[r]=e[0][n][r];return t=$i(t,e[1]),t},b="=",w={type:"literal",value:"=",description:'"="'},E=function(e){return e},S=function(e){return e.toString()},x=function(e){return e.toString()},T=function(e,t){var n={};return e=e.toLowerCase(),e==="wordwraparcs"?n[e]=Ji(t):n[e]=t,n},N="hscale",C={type:"literal",value:"hscale",description:'"hscale"'},k="width",L={type:"literal",value:"width",description:'"width"'},A="arcgradient",O={type:"literal",value:"arcgradient",description:'"arcgradient"'},M="wordwraparcs",_={type:"literal",value:"wordwraparcs",description:'"wordwraparcs"'},D="watermark",P={type:"literal",value:"watermark",description:'"watermark"'},H=function(e){return e},B=function(e){return e[0].push(e[1]),e[0]},j={type:"other",description:"entity"},F=":",I={type:"literal",value:":",description:'":"'},q=function(e){return e},R=function(e,t){var n={};return n.name=e,t&&(n.label=t),n},U=function(e){return e},z=function(e){return[e]},W=function(e){return e[0].push(e[1][0]),e[0]},X=function(e){return e},V=function(e){return e},$=function(e){return e},J=function(e,t){return t&&(e.label=t),e},K=function(e){return{kind:e}},Q=function(e,t,n){return{kind:t,from:e,to:n}},G="*",Y={type:"literal",value:"*",description:'"*"'},Z=function(e,t){return{kind:e,from:"*",to:t}},et=function(e,t){return{kind:t,from:e,to:"*"}},tt="{",nt={type:"literal",value:"{",description:'"{"'},rt="}",it={type:"literal",value:"}",description:'"}"'},st=function(e,t,n,r,i){var s={kind:t,from:e,to:n,arcs:i};return r&&(s.label=r),s},ot="|||",ut={type:"literal",value:"|||",description:'"|||"'},at="...",ft={type:"literal",value:"...",description:'"..."'},lt="---",ct={type:"literal",value:"---",description:'"---"'},ht=function(e){return e.toLowerCase()},pt={type:"other",description:"bi-directional arrow"},dt="--",vt={type:"literal",value:"--",description:'"--"'},mt="<->",gt={type:"literal",value:"<->",description:'"<->"'},yt="==",bt={type:"literal",value:"==",description:'"=="'},wt="<<=>>",Et={type:"literal",value:"<<=>>",description:'"<<=>>"'},St="<=>",xt={type:"literal",value:"<=>",description:'"<=>"'},Tt="..",Nt={type:"literal",value:"..",description:'".."'},Ct="<<>>",kt={type:"literal",value:"<<>>",description:'"<<>>"'},Lt="::",At={type:"literal",value:"::",description:'"::"'},Ot="<:>",Mt={type:"literal",value:"<:>",description:'"<:>"'},_t={type:"other",description:"left to right arrow"},Dt="->",Pt={type:"literal",value:"->",description:'"->"'},Ht="=>>",Bt={type:"literal",value:"=>>",description:'"=>>"'},jt="=>",Ft={type:"literal",value:"=>",description:'"=>"'},It=">>",qt={type:"literal",value:">>",description:'">>"'},Rt=":>",Ut={type:"literal",value:":>",description:'":>"'},zt="-x",Wt={type:"literal",value:"-x",description:'"-x"'},Xt={type:"other",description:"right to left arrow"},Vt="<-",$t={type:"literal",value:"<-",description:'"<-"'},Jt="<<=",Kt={type:"literal",value:"<<=",description:'"<<="'},Qt="<=",Gt={type:"literal",value:"<=",description:'"<="'},Yt="<<",Zt={type:"literal",value:"<<",description:'"<<"'},en="<:",tn={type:"literal",value:"<:",description:'"<:"'},nn="x-",rn={type:"literal",value:"x-",description:'"x-"'},sn={type:"other",description:"box"},on="note",un={type:"literal",value:"note",description:'"note"'},an="abox",fn={type:"literal",value:"abox",description:'"abox"'},ln="rbox",cn={type:"literal",value:"rbox",description:'"rbox"'},hn="box",pn={type:"literal",value:"box",description:'"box"'},dn={type:"other",description:"arc spanning box"},vn="alt",mn={type:"literal",value:"alt",description:'"alt"'},gn="else",yn={type:"literal",value:"else",description:'"else"'},bn="opt",wn={type:"literal",value:"opt",description:'"opt"'},En="break",Sn={type:"literal",value:"break",description:'"break"'},xn="par",Tn={type:"literal",value:"par",description:'"par"'},Nn="seq",Cn={type:"literal",value:"seq",description:'"seq"'},kn="strict",Ln={type:"literal",value:"strict",description:'"strict"'},An="neg",On={type:"literal",value:"neg",description:'"neg"'},Mn="critical",_n={type:"literal",value:"critical",description:'"critical"'},Dn="ignore",Pn={type:"literal",value:"ignore",description:'"ignore"'},Hn="consider",Bn={type:"literal",value:"consider",description:'"consider"'},jn="assert",Fn={type:"literal",value:"assert",description:'"assert"'},In="loop",qn={type:"literal",value:"loop",description:'"loop"'},Rn="ref",Un={type:"literal",value:"ref",description:'"ref"'},zn="exc",Wn={type:"literal",value:"exc",description:'"exc"'},Xn='"',Vn={type:"literal",value:'"',description:'"\\""'},$n=function(e){return e.join("")},Jn=void 0,Kn='\\"',Qn={type:"literal",value:'\\"',description:'"\\\\\\""'},Gn={type:"any",description:"any character"},Yn=function(e){return e},Zn=function(e){return e.join("").trim()},er={type:"other",description:"identifier"},tr=/^[A-Za-z_0-9]/,nr={type:"class",value:"[A-Za-z_0-9]",description:"[A-Za-z_0-9]"},rr=function(e){return e.join("")},ir={type:"other",description:"whitespace"},sr=/^[ \t]/,or={type:"class",value:"[ \\t]",description:"[ \\t]"},ur={type:"other",description:"lineend"},ar=/^[\r\n]/,fr={type:"class",value:"[\\r\\n]",description:"[\\r\\n]"},lr="/*",cr={type:"literal",value:"/*",description:'"/*"'},hr="*/",pr={type:"literal",value:"*/",description:'"*/"'},dr=function(e,t,n){return e+t.join("")+n},vr="//",mr={type:"literal",value:"//",description:'"//"'},gr="#",yr={type:"literal",value:"#",description:'"#"'},br=/^[^\r\n]/,wr={type:"class",value:"[^\\r\\n]",description:"[^\\r\\n]"},Er=function(e,t){return e+t.join("")},Sr={type:"other",description:"comment"},xr={type:"other",description:"integer"},Tr=/^[0-9]/,Nr={type:"class",value:"[0-9]",description:"[0-9]"},Cr=function(e){return parseInt(e.join(""),10)},kr={type:"other",description:"real"},Lr=".",Ar={type:"literal",value:".",description:'"."'},Or=function(e){return parseFloat(e.join(""))},Mr={type:"other",description:"boolean"},_r="true",Dr={type:"literal",value:"true",description:'"true"'},Pr="false",Hr={type:"literal",value:"false",description:'"false"'},Br="on",jr={type:"literal",value:"on",description:'"on"'},Fr="off",Ir={type:"literal",value:"off",description:'"off"'},qr=0,Rr=0,Ur=0,zr={line:1,column:1,seenCR:!1},Wr=0,Xr=[],Vr=0,$r;if("startRule"in n){if(!(n.startRule in i))throw new Error("Can't start parsing from rule \""+n.startRule+'".');s=i[n.startRule]}$r=s();if($r!==r&&qr===e.length)return $r;throw $r!==r&&qr<e.length&&ti({type:"end",description:"end of input"}),ni(null,Xr,Wr)}return e(t,Error),{SyntaxError:t,parse:n}}),n("render/graphics/renderutensils",[],function(){function s(i){var s={height:15,width:15,x:2,y:2};if(typeof i.getBBox=="function"){var o=r.createElementNS(e,"svg");o.setAttribute("version","1.1"),o.setAttribute("xmlns",e),o.setAttribute("xmlns:xlink",t),r.body.appendChild(o),o.appendChild(i),s=i.getBBox(),o.removeChild(i),r.body.removeChild(o);if(s.height>n||s.width>n||s.height<0-n||s.width<0-n)s={height:0,width:0,x:0,y:0}}return s}function o(t,n){var i=r.createElementNS(e,"path");return i.setAttribute("d",t),n&&i.setAttribute("class",n),i}function u(t,n){var i=r.createElementNS(e,"polygon");return i.setAttribute("points",t),n&&i.setAttribute("class",n),i}function a(t,n,i,s,o,u,a){var f=r.createElementNS(e,"rect");return f.setAttribute("width",t),f.setAttribute("height",n),s&&f.setAttribute("x",s),o&&f.setAttribute("y",o),u&&f.setAttribute("rx",u),a&&f.setAttribute("ry",a),i&&f.setAttribute("class",i),f}function f(e,t,n,r,i){var s=3,u="M"+r+","+i;return u+="l"+s+", -"+t/2,u+="l"+(e-2*s)+",0",u+="l"+s+","+t/2,u+="l-"+s+","+t/2,u+="l-"+(e-2*s)+",0 ",u+="l-"+s+",-"+t/2,o(u,n)}function l(e,t,n,r,i,s){var u=s?s:9,a=u.toString(10),f="M"+r+","+i;return f+="l"+(e-u)+",0 ",f+="l0,"+a+" l"+a+",0 m-"+a+",-"+a+" l"+a+","+a+" ",f+="l0,"+(t-u)+" ",f+="l-"+e+",0 ",f+="l0,-"+t+" ",o(f,n)}function c(e,t,n,r,i,s){var u=s?s:7,a="M"+r+","+i;return a+=" l"+e+",0 ",a+=" l0,"+(t-u),a+=" l-"+u.toString(10)+","+u.toString(10),a+=" l-"+(e-u)+",0 ",a+="H",o(a,n)}function h(n,s,o,u,a,f,l){var c=r.createElementNS(e,"text"),h=r.createElementNS(e,"tspan"),p=r.createElementNS(e,"tspan"),d=r.createTextNode(n);c.setAttribute("x",s.toString()),c.setAttribute("y",o.toString()),u&&c.setAttribute("class",u),h.appendChild(d);if(a){var v=r.createElementNS(e,"a");v.setAttributeNS(t,"xlink:href",a),v.setAttributeNS(t,"xlink:title",a),v.setAttributeNS(t,"xlink:show","new"),v.appendChild(h),c.appendChild(v)}else c.appendChild(h);if(f){p.appendChild(r.createTextNode(" ["+f+"]")),p.setAttribute("style",i);if(l){var m=r.createElementNS(e,"a");m.setAttributeNS(t,"xlink:href",l),m.setAttributeNS(t,"xlink:title",l),m.setAttributeNS(t,"xlink:show","new"),m.appendChild(p),c.appendChild(m)}else c.appendChild(p)}return c}function p(t,n,i,s,o){var u=r.createElementNS(e,"line");return u.setAttribute("x1",t.toString()),u.setAttribute("y1",n.toString()),u.setAttribute("x2",i.toString()),u.setAttribute("y2",s.toString()),o&&u.setAttribute("class",o),u}function d(e,t,n,r,i){var s=2,u="M"+e.toString()+","+t.toString(),a=n>e?a=1:a=-1,f=a*(r-t)/(n-e),l=n-e,c=r-t;return u+="l"+a.toString()+","+f.toString(),u+="M"+e.toString()+","+(t-s).toString(),u+=" l"+l.toString()+","+c.toString(),u+="M"+e.toString()+","+(t+s).toString(),u+=" l"+l.toString()+","+c.toString(),u+="M"+(n-a).toString()+","+r.toString(),u+="l"+a.toString()+","+f.toString(),o(u,i)}function v(e,t,n,r,i,s){return s?d(e,t,n,r,i):p(e,t,n,r,i)}function m(e,t,n,r,i){var s="M"+e.toString()+", -"+t.toString();return s+=" l"+r.toString()+",0",s+=" l0,"+n.toString(),s+=" l-"+r.toString()+",0",o(s,i)}function g(t){var n=r.createElementNS(e,"g");return n.setAttribute("id",t),n}function y(n,i,s){var o=r.createElementNS(e,"use");return o.setAttribute("x",n.toString()),o.setAttribute("y",i.toString()),o.setAttributeNS(t,"xlink:href","#"+s),o}function b(t,n,i){var s=r.createElementNS(e,"marker");return s.setAttribute("orient",i),s.setAttribute("id",t),s.setAttribute("class",n),s.setAttribute("viewBox","0 0 10 10"),s.setAttribute("refX","9"),s.setAttribute("refY","3"),s.setAttribute("markerUnits","strokeWidth"),s.setAttribute("markerWidth","10"),s.setAttribute("markerHeight","10"),s.setAttribute("refX","9"),s.setAttribute("refX","9"),s}function w(e,t,n,r,i){var s=b(e,t,n),u=o(r,i);return s.appendChild(u),s}function E(e,t,n,r,i){var s=b(e,t,n),o=u(r,i);return s.appendChild(o),s}var e="http://www.w3.org/2000/svg",t="http://www.w3.org/1999/xlink",n=1e5,r,i="vertical-align : text-top;";return i+="font-size: 0.7em; text-anchor: start;",{init:function(e){r=e},createRect:a,createABox:f,createNote:l,createEdgeRemark:c,createText:h,createLine:v,createUTurn:m,createGroup:g,createUse:y,createMarkerPath:w,createMarkerPolygon:E,getBBox:s,SVGNS:e,XLINKNS:t}}),n("render/graphics/renderskeleton",["./renderutensils"],function(e){function n(t,n){var r=t;return r.appendChild(e.createMarkerPath(n+"signal","arrow-marker","auto","M 9 3 l -8 2","arrow-style")),r.appendChild(e.createMarkerPath(n+"signal-u","arrow-marker","auto","M 9 3 l -8 -2","arrow-style")),r.appendChild(e.createMarkerPath(n+"signal-l","arrow-marker","auto","M 9 3 l 8 2","arrow-style")),r.appendChild(e.createMarkerPath(n+"signal-lu","arrow-marker","auto","M 9 3 l 8 -2","arrow-style")),r.appendChild(e.createMarkerPolygon(n+"method","arrow-marker","auto","1,1 9,3 1,5","filled arrow-style")),r.appendChild(e.createMarkerPolygon(n+"method-l","arrow-marker","auto","17,1 9,3 17,5","filled arrow-style")),r.appendChild(e.createMarkerPath(n+"callback","arrow-marker","auto","M 1 1 l 8 2 l -8 2","arrow-style")),r.appendChild(e.createMarkerPath(n+"callback-l","arrow-marker","auto","M 17 1 l -8 2 l 8 2","arrow-style")),r.appendChild(e.createMarkerPath(n+"lost","arrow-marker","auto","M6.5,-0.5 L11.5,5.5 M6.5,5.5 L11.5,-0.5","arrow-style")),r}function r(e){var n=t.createElement("style");return n.setAttribute("type","text/css"),n.appendChild(t.createTextNode(l(e))),n}function i(n){var r=t.createElementNS(e.SVGNS,"svg");return r.setAttribute("version","1.1"),r.setAttribute("id",n),r.setAttribute("xmlns",e.SVGNS),r.setAttribute("xmlns:xlink",e.XLINKNS),r}function s(i){var s=t.createElementNS(e.SVGNS,"defs");return s.appendChild(r(i)),s=n(s,i),s.appendChild(e.createGroup(i+"__defs")),s}function o(n){var r=t.createElementNS(e.SVGNS,"desc");return r.setAttribute("id",n+"__msc_source"),r}function u(t){var n=e.createGroup(t+"__body");return n.appendChild(e.createGroup(t+"__background")),n.appendChild(e.createGroup(t+"__arcspanlayer")),n.appendChild(e.createGroup(t+"__lifelinelayer")),n.appendChild(e.createGroup(t+"__sequencelayer")),n.appendChild(e.createGroup(t+"__notelayer")),n.appendChild(e.createGroup(t+"__watermark")),n}function a(t){var n;return"object"!=typeof document?n=t.document:n=window.document,e.init(n),n}function f(e,n,r){t=a(r);var f=t.getElementById(e);f===null&&(f=t.body);var l=i(n);l.appendChild(o(n)),l.appendChild(s(n)),l.appendChild(u(n)),f.appendChild(l)}function l(e){return"svg{  font-family:Helvetica,sans-serif;  font-size:14pt;  font-weight:normal;  font-style:normal;  text-decoration:none;  background-color:none;  stroke:black;  color:black;}rect{  fill:none;  stroke:black;  stroke-width: 2;}.bglayer{  fill:none;  stroke:white;  stroke-width:0;}rect.textbg{  fill:none;  stroke:white;  stroke-width:0;  opacity:0.9;}line{  stroke:black;  stroke-width:2;}.arcrowomit{  stroke-dasharray:2,2;}text{  color:inherit;  stroke:none;  text-anchor:middle;}text.entity{  text-decoration:underline;}text.anchor-start{  text-anchor:start;}path{  stroke:black;  color:black;  stroke-width:2;  fill:none;}.dotted{  stroke-dasharray:5,2;}.striped{  stroke-dasharray:10,5;}.arrow-marker{  overflow:visible;}.arrow-style{  stroke:black;  stroke-dasharray:100,1; /* 'none' should work, but doesn't in webkit */  stroke-width:1;}.filled{  stroke:inherit;  fill:black; /* no-inherit */}.arcrowomit{  stroke-dasharray:2,2;}.box{  /* fill: #ffc;  no-inherit */  fill:white;  opacity:0.9;}.boxtext, .arctext{  font-size:0.8em;  text-anchor:middle;}.comment{  stroke-dasharray:5,2;} ."+e+"signal{  marker-end:url(#"+e+"signal);} ."+e+"signal-u{  marker-end:url(#"+e+"signal-u);} ."+e+"signal-both{  marker-end:url(#"+e+"signal);  marker-start:url(#"+e+"signal-l);} ."+e+"signal-both-u{  marker-end:url(#"+e+"signal-u);  marker-start:url(#"+e+"signal-lu);} ."+e+"signal-both-self{  marker-end:url(#"+e+"signal-u);  marker-start:url(#"+e+"signal-l);} ."+e+"method{  marker-end:url(#"+e+"method);} ."+e+"method-both{  marker-end:url(#"+e+"method);  marker-start:url(#"+e+"method-l);} ."+e+"returnvalue{  stroke-dasharray:5,2;  marker-end:url(#"+e+"callback);} ."+e+"returnvalue-both{  stroke-dasharray:5,2;  marker-end:url(#"+e+"callback);  marker-start:url(#"+e+"callback-l);} ."+e+"callback{  marker-end:url(#"+e+"callback);} ."+e+"callback-both{  marker-end:url(#"+e+"callback);  marker-start:url(#"+e+"callback-l);} ."+e+"emphasised{  marker-end:url(#"+e+"method);} ."+e+"emphasised-both{  marker-end:url(#"+e+"method);  marker-start:url(#"+e+"method-l);} ."+e+"lost{  marker-end:url(#"+e+"lost);} .inherit{  stroke:inherit;  color:inherit;} .inherit-fill{  fill:inherit;}.watermark{  stroke:black;  color:black;  fill:black;  font-size: 48pt;  font-weight:bold;  opacity:0.14;}"}var t;return{bootstrap:f,init:a}}),n("render/text/textutensils",[],function(){function e(e,t){var n=0,r=[],i=0,s=0,o=0,u=0,a=e.replace(/[\t\n]+/g," ").replace(/\\n/g,"\n");while(u<=a.length)u>=a.length?r.push(a.substring(i,u)):a[u]==="\n"?(n=0,o=u,r.push(a.substring(i,o)),i=o+1):n++>=t&&(o=a.substring(0,u).lastIndexOf(" "),o===-1||o<i?(n=1,o=u,s=u):(n=0,s=o+1),r.push(a.substring(i,o)),i=s),u++;return r}function t(e){var t=Math.abs(e),n=t/8;return t>160&&t<=320?n=t/6.4:t>320&&t<=480?n=t/5.9:t>480&&(n=t/5.6),n}function n(e){var t={msgenny:"msgenny",mscgen:"mscgen",msc:"mscgen",mscin:"mscgen",xu:"xu",json:"json",ast:"json"},n=e.lastIndexOf(".");if(n>-1){var r=e.slice(n+1);if(t[r])return t[r]}return"mscgen"}return{wrap:function(t,n){return e(t,n)},determineMaxTextWidth:t,unescapeString:function(e){return e.replace(/\\\"/g,'"')},escapeString:function(e){return e.replace(/\\\"/g,'"').replace(/\"/g,'\\"')},classifyExtension:n,formatNumber:function(e,t){var n=e.toString(),r=t-n.length;for(var i=0;i<r;i++)n=" "+n;return n}}}),n("render/text/asttransform",[],function(){function e(e,t){e&&t&&e.forEach(function(e){t.forEach(function(t){t(e)})})}function t(e,t,n,r){r&&r.forEach(function(r){r(n,e,t)})}function n(e,n,i,s){i&&i.forEach(function(t){t(n,e)}),n.forEach(function(o){t(e,n,o,s),o.arcs&&r(e,o.arcs,i,s)})}function r(e,t,r,i){e&&t&&(r||i)&&t.forEach(function(t){n(e,t,r,i)})}function i(t,n,i,s){return e(t.entities,n),r(t.entities,t.arcs,s,i),t}return{transform:i}}),n("render/text/dotmap",[],function(){function s(e,t,n){var r="";return e&&i[e]&&(r=i[e],t&&n&&t>=n&&(r==="signal"&&(r="signal-u"),r==="signal-both"&&(t===n?r="signal-both-self":r="signal-both-u"))),r}var e={"->":"rvee","<->":"rvee","=>":"normal","<=>":"normal","-x":"oinvonormal"},t={box:"box",abox:"hexagon",rbox:"box",note:"note"},n={">>":"dashed","<<>>":"dashed","..":"dashed",":>":"bold","<:>":"bold","::":"bold",rbox:"rounded"},r={"|||":"emptyarc","...":"emptyarc","---":"emptyarc","->":"directional","=>":"directional","=>>":"directional",">>":"directional",":>":"directional","-x":"directional",note:"box",box:"box",abox:"box",rbox:"box","<->":"bidirectional","<=>":"bidirectional","<<=>>":"bidirectional","<<>>":"bidirectional","<:>":"bidirectional","--":"nondirectional","==":"nondirectional","..":"nondirectional","::":"nondirectional",alt:"inline_expression","else":"inline_expression",opt:"inline_expression","break":"inline_expression",par:"inline_expression",seq:"inline_expression",strict:"inline_expression",neg:"inline_expression",critical:"inline_expression",ignore:"inline_expression",consider:"inline_expression",assert:"inline_expression",loop:"inline_expression",ref:"inline_expression",exc:"inline_expression"},i={"->":"signal","<->":"signal-both","=>":"method","<=>":"method-both",">>":"returnvalue","<<>>":"returnvalue-both","..":"dotted","=>>":"callback","<<=>>":"callback-both",":>":"emphasised","<:>":"emphasised-both","::":"double","-x":"lost"};return{getArrow:function(t){return e[t]},getShape:function(e){return t[e]},getStyle:function(e){return n[e]},getAggregate:function(e){return r[e]},determineArcClass:s}}),n("utl/utensils",[],function(){return{deepCopy:function(t){return JSON.parse(JSON.stringify(t))}}}),n("render/text/flatten",["./asttransform","./dotmap","../../utl/utensils"],function(e,t,n){function i(e){e.label===undefined&&(e.label=e.name)}function s(e){var t={"<-":"->","<=":"=>","<<=":"=>>","<<":">>","<:":":>","x-":"-x"};if(e.kind&&t[e.kind]){e.kind=t[e.kind];var n=e.from;e.from=e.to,e.to=n}return e}function o(e,t){!e.linecolor&&t.arclinecolor&&(e.linecolor=t.arclinecolor),!e.textcolor&&t.arctextcolor&&(e.textcolor=t.arctextcolor),!e.textbgcolor&&t.arctextbgcolor&&(e.textbgcolor=t.arctextbgcolor)}function u(e,t){function n(e,t){for(var n=0;n<e.length;n++)if(e[n].name===t)return n;return-1}if(e&&e.from){var r=n(t,e.from);r>-1&&o(e,t[r])}}function a(e){var t=e.arcs.length;return e.arcs.forEach(function(e){e[0].arcs&&(t+=a(e[0])+1)}),t}function f(e,i,s,u,l){var c={};"inline_expression"===t.getAggregate(e[0].kind)?(c=n.deepCopy(e[0]),c&&(c.arcs?(c.numberofrows=a(c),delete c.arcs,i.arcs.push([c]),e[0].arcs.forEach(function(e){f(e,i,c.from,c.to,l+1),e.forEach(function(e){o(e,c)})}),c.depth=l,l>r&&(r=l),i.arcs.push([{kind:"|||",from:c.from,to:c.to}])):i.arcs.push([c]))):(s&&u&&e.forEach(function(e){"emptyarc"===t.getAggregate(e.kind)&&(e.from=s,e.to=u,e.depth=l)}),i.arcs.push(e))}function l(e){var t={};return r=0,t.options=e.options?n.deepCopy(e.options):undefined,t.entities=e.entities?n.deepCopy(e.entities):undefined,t.arcs=[],e&&e.arcs&&e.arcs.forEach(function(e){f(e,t,undefined,undefined,0)}),t.depth=r+1,t}function c(e,t){var r=[];return e.forEach(function(e){t.from!==e.name&&(t.to=e.name,r.push(n.deepCopy(t)))}),r}function h(e){if(e.entities&&e.arcs){var t=[],r={};e.arcs.forEach(function(i,s){i.forEach(function(o,u){o.to==="*"&&(r=n.deepCopy(o),delete e.arcs[s][u],t=c(e.entities,r),i[u]=t.shift(),e.arcs[s]=i.concat(t))})})}return e}var r=0;return{swapRTLArc:s,unwind:l,explodeBroadcasts:h,flatten:function(t){return e.transform(l(t),[i],[s,u])},dotFlatten:function(t){return h(e.transform(t,[i],[s,u]))}}}),n("render/graphics/renderast",["./renderutensils","./renderskeleton","../text/textutensils","../text/flatten","../text/dotmap"],function(e,t,n,r,i){function b(){y=[]}function w(e){return y[e]?y[e]:{y:g.entityHeight+1.5*g.arcRowHeight+e*g.arcRowHeight,height:g.arcRowHeight}}function E(e,t,n){if(t===undefined||t<g.arcRowHeight)t=g.arcRowHeight;if(n===undefined){var r=w(e-1);r&&r.y>0?n=r.y+(r.height+t)/2:n=g.entityHeight+1.5*g.arcRowHeight+e*g.arcRowHeight}y[e]={y:n,height:t}}function S(e,n){g.document=t.init(n);var r=g.document.getElementById(h+e);if(r&&r!==null&&r!==undefined){var i=g.document.getElementById(e);i.removeChild(r)}}function x(e){g.interEntitySpacing=o,g.entityHeight=a,g.entityWidth=u,g.arcRowHeight=f,g.arcGradient=c,g.wordWrapArcs=!1,e&&(e.hscale&&(g.interEntitySpacing=e.hscale*o,g.entityWidth=e.hscale*u),e.arcgradient&&(g.arcRowHeight=parseInt(e.arcgradient,10)+f,g.arcGradient=parseInt(e.arcgradient,10)+c),e.wordwraparcs&&e.wordwraparcs==="true"&&(g.wordWrapArcs=!0))}function T(t,n){var r=g.document.getElementById(k("__watermark")),i=e.createText(t,n.width/2,n.height/2,"watermark"),s=0-Math.atan(n.height/n.width)*360/(2*Math.PI);i.setAttribute("transform","rotate("+s.toString()+" "+(n.width/2).toString()+" "+(n.height/2).toString()+")"),r.appendChild(i)}function N(e,t){t.scale=e/t.width,t.width*=t.scale,t.height*=t.scale,t.horizontaltransform*=t.scale,t.verticaltransform*=t.scale}function C(e,t){e&&(e.watermark&&T(e.watermark,t),e.width&&N(e.width,t))}function k(e){return m+e}function L(n,i,o,u){n=r.flatten(n),m=h+o,t.bootstrap(o,m,u),g.document=t.init(u),g.layer.defs=g.document.getElementById(k("__defs")),g.layer.lifeline=g.document.getElementById(k("__lifelinelayer")),g.layer.sequence=g.document.getElementById(k("__sequencelayer")),g.layer.notes=g.document.getElementById(k("__notelayer")),g.layer.inline=g.document.getElementById(k("__arcspanlayer")),g.textHeight=e.getBBox(e.createText("ÁjyÎ9ƒ@",0,0)).height,x(n.options),A(i);var a=0;g.maxDepth=0,n.depth&&(a=2*(n.depth+1)*2*l,g.maxDepth=n.depth),H(n.entities),B(n.arcs,n.entities);var f=n.arcs?n.arcs.length:0,c=w(f-1),p={width:n.entities.length*g.interEntitySpacing+a,height:c.y+c.height/2+2*s,horizontaltransform:(g.interEntitySpacing+a-g.entityWidth)/2,verticaltransform:s,scale:1};O(p),C(n.options,p),M(p)}function A(e){if(e){var t=g.document.createTextNode("\n\n# Generated by mscgen_js - http://sverweij.github.io/mscgen_js\n"+e);g.document.getElementById(k("__msc_source")).appendChild(t)}}function O(t){var n=e.createRect(t.width,t.height,"bglayer",0-t.horizontaltransform,0-t.verticaltransform);g.document.getElementById(k("__background")).appendChild(n)}function M(e){var t=g.document.getElementById(m),n=g.document.getElementById(k("__body"));n.setAttribute("transform","translate(0,0) scale("+e.scale+","+e.scale+")"),t.setAttribute("width",e.width.toString()),t.setAttribute("height",e.height.toString())}function _(t){var n=g.entityHeight,r=g.entityHeight;return t.forEach(function(t){r=e.getBBox(D(t.name,t)).height,r>n&&(n=r)}),n}function D(t,n){var r=e.createGroup(t),i=V(t+"_txt",n,0,g.entityHeight/2,g.entityWidth,"entity"),s=e.createRect(g.entityWidth,g.entityHeight);return Q(s,n),r.appendChild(s),r.appendChild(i),r}function P(t,n){var r={};g.layer.defs.appendChild(D(k(t.name),t)),g.layer.sequence.appendChild(e.createUse(n,0,k(t.name))),d[t.name]=n+g.entityWidth/2,t.arclinecolor&&(r.arclinecolor=t.arclinecolor),t.arctextcolor&&(r.arctextcolor=t.arctextcolor),t.arctextbgcolor&&(r.arctextbgcolor=t.arctextbgcolor),v[t.name]=r}function H(e){var t=0;d={},v={},e&&(g.entityHeight=_(e)+l*2,e.forEach(function(e){P(e,t),t+=g.interEntitySpacing})),p=t}function B(t,n){var r=[],s="",o=p-g.interEntitySpacing+g.entityWidth;g.layer.defs.appendChild(q(n,k("arcrow"))),g.layer.lifeline.appendChild(e.createUse(0,w(-1).y,k("arcrow"))),b(),t&&(t.forEach(function(t,u){var a=!1,f=[];E(u),t.forEach(function(t,c){var h=k(u.toString()+"_"+c.toString()),p;s="",t.label&&(s=t.label);switch(i.getAggregate(t.kind)){case"emptyarc":p=U(t,h),a="..."===t.kind,f.push({id:h,layer:g.layer.sequence});break;case"box":p=G(h,d[t.from],d[t.to],t),f.push({id:h,layer:g.layer.notes});break;case"inline_expression":p=j(h+"_label",t),f.push({id:h+"_label",layer:g.layer.notes}),r.push({id:h,arc:t,rownum:u});break;default:if(t.from&&t.to){var v=t.from,m=t.to,y=0,b=0;m==="*"?(b=d[v],n.forEach(function(e,n){e.name!=v&&(y=d[e.name],t.label="",g.layer.defs.appendChild(z(h+"bc"+n,t,b,y)),f.push({id:h+"bc"+n,layer:g.layer.sequence}))}),t.label=s,p=V(h+"_txt",t,0,0-g.textHeight/2-l,o),f.push({id:h+"_txt",layer:g.layer.sequence})):(b=d[v],y=d[m],p=z(h,t,b,y),f.push({id:h,layer:g.layer.sequence}))}}p&&(E(u,Math.max(w(u).height,e.getBBox(p).height+2*l)),g.layer.defs.appendChild(p))});var c="arcrow_"+u.toString(),h="arcrow";a&&(h="arcrowomit"),g.layer.defs.appendChild(q(n,h,w(u).height,k(c))),g.layer.lifeline.appendChild(e.createUse(0,w(u).y,k(c))),f.forEach(function(t){t.layer.appendChild(e.createUse(0,w(u).y,t.id))})}),F(r))}function j(t,n){var r=d[n.from],i=d[n.to],s=7;if(r>i){var o=r;r=i,i=o}var u=i-r+(g.interEntitySpacing-2*l)-s-l,a=r-(g.interEntitySpacing-3*l)/2-(g.maxDepth-n.depth)*2*l,f=e.createGroup(t);n.label=n.kind+(n.label?": "+n.label:"");var c=V(t+"_txt",n,a+l-u/2,g.arcRowHeight/4,u,"anchor-start"),h=e.getBBox(c),p=Math.max(h.height+2*l,g.arcRowHeight/2-2*l),v=Math.min(h.width+2*l,u),m=e.createEdgeRemark(v-l+s,p,"box",a,0,s);return Q(m,n),f.appendChild(m),f.appendChild(c),f}function F(t){t.forEach(function(t){g.layer.defs.appendChild(I(t)),g.layer.inline.appendChild(e.createUse(0,w(t.rownum).y,t.id))})}function I(e){var t=w(e.rownum).y,n=w(e.rownum+e.arc.numberofrows+1).y,r=n-t;return e.arc.label="",G(e.id,d[e.arc.from],d[e.arc.to],e.arc,r)}function q(t,n,r,i){if(i===undefined||i===null)i=n;if(r===undefined||r===null||r<g.arcRowHeight)r=g.arcRowHeight;var s=e.createGroup(i),o=0;return t.forEach(function(t){var i=e.createLine(o+g.entityWidth/2,0-r/2,o+g.entityWidth/2,r/2,n);t.linecolor&&i.setAttribute("style","stroke : "+t.linecolor+";"),s.appendChild(i),o+=g.interEntitySpacing}),s}function R(t,n,r,i,s){var o=2*(g.arcRowHeight/5),u=g.interEntitySpacing/3,a=e.createGroup("selfie");if(i){var f=e.createUTurn(n,(o-4)/2,r-2+o,u-4,"none"),l=e.createUTurn(n,(o+4)/2,r+6+o,u,t);s&&(f.setAttribute("style","stroke: "+s+";"),l.setAttribute("style","stroke: "+s+";")),a.appendChild(f),a.appendChild(l)}else{var c=e.createUTurn(n,o/2,r+o,u,t);s&&c.setAttribute("style","stroke: "+s+";"),a.appendChild(c)}return a}function U(e,t){var n;if(e.from&&e.to&&d[e.from]>d[e.to]){var r=e.from;e.from=e.to,e.to=r}switch(e.kind){case"...":case"|||":n=$(t,e);break;case"---":n=J(t,e)}return n}function z(t,n,r,s){var o=e.createGroup(t),u="",a=g.arcGradient,f=":>"===n.kind||"::"===n.kind||"<:>"===n.kind;u=m+i.determineArcClass(n.kind,r,s),"-x"===n.kind&&(s=r+(s-r)*.75);var l=0;n.arcskip&&(l=n.arcskip*g.arcRowHeight,a=l),n.label&&n.label.indexOf("\\n")===-1&&(n.label+="\\n");if(r===s)o.appendChild(R(u,r,l,f,n.linecolor)),o.appendChild(V(t+"_txt",n,r+2-g.interEntitySpacing/2,0-g.arcRowHeight/5,g.interEntitySpacing,"anchor-start"));else{var c=e.createLine(r,0,s,a,u,f);n.linecolor&&c.setAttribute("style","stroke:"+n.linecolor+"; fill: "+n.linecolor+";"),o.appendChild(c),o.appendChild(V(t+"_txt",n,r,0,s-r))}return o}function W(e,t,r){var i=e.split("\\n"),s=n.determineMaxTextWidth(r);switch(t){case"box":case"rbox":case"abox":case"note":case undefined:i=n.wrap(e,s);break;default:g.wordWrapArcs&&(i=n.wrap(e,s))}return i}function X(t,n,r,i,s,o,u){var a=t,f={};u===0?f=e.createText(n,r,i+g.textHeight/4+u*g.textHeight,s,o.url,o.id,o.idurl):f=e.createText(n,r,i+g.textHeight/4+u*g.textHeight,s,o.url);var l=e.getBBox(f),c=e.createRect(l.width,l.height,"textbg",l.x,l.y);return K(f,o),o.textbgcolor&&c.setAttribute("style","fill: "+o.textbgcolor+"; stroke:"+o.textbgcolor+";"),o.url&&!o.textcolor&&(o.textcolor="blue",K(f,o)),a.appendChild(c),a.appendChild(f),a}function V(t,r,i,s,o,u){var a=e.createGroup(t);if(r.label){var f=i+o/2;r.label=n.unescapeString(r.label),r.id&&(r.id=n.unescapeString(r.id));var l=W(r.label,r.kind,o),c=s-(l.length-1)*g.textHeight/2-(l.length-1)/2;l.forEach(function(e,t){a=X(a,e,f,c,u,r,t),c++})}return a}function $(t,n){var r=0,i=p-g.interEntitySpacing+g.entityWidth,s=e.createGroup(t);return n.from&&n.to&&(r=d[n.from],i=Math.abs(d[n.to]-d[n.from])),s.appendChild(V(t,n,r,0,i)),s}function J(t,n){var r=0,i=p-g.interEntitySpacing+g.entityWidth,s="dotted",o=e.createGroup(t);if(n.from&&n.to){var u=(g.maxDepth-n.depth)*2*l;r=d[n.from]-(g.interEntitySpacing+2*l)/2-u,i=d[n.to]+(g.interEntitySpacing+2*l)/2+u,s="striped"}var a=e.createLine(r,0,i,0,s);return o.appendChild(a),o.appendChild($(t+"_txt",n)),n.linecolor&&a.setAttribute("style","stroke: "+n.linecolor+";"),o}function K(e,t){if(t.textcolor){var n="";n+="fill:"+t.textcolor+";",e.setAttribute("style",n)}}function Q(e,t){var n="";t.textbgcolor&&(n+="fill:"+t.textbgcolor+";"),t.linecolor&&(n+="stroke:"+t.linecolor+";"),e.setAttribute("style",n)}function G(t,n,r,i,s){if(n>r){var o=n;n=r,r=o}var u=r-n+g.interEntitySpacing-2*l,a=9,f=6,c=n-(g.interEntitySpacing-2*l)/2,h=e.createGroup(t),p,d=V(t+"_txt",i,c,0,u),v=e.getBBox(d),m=s?s:Math.max(v.height+2*l,g.arcRowHeight-2*l);switch(i.kind){case"box":p=e.createRect(u,m,"box",c,0-m/2);break;case"rbox":p=e.createRect(u,m,"box",c,0-m/2,f,f);break;case"abox":p=e.createABox(u,m,"box",c,0);break;case"note":p=e.createNote(u,m,"box",c,0-m/2,a);break;default:var y=(g.maxDepth-i.depth)*2*l;p=e.createRect(u+y*2,m,"box",c-y,0)}return Q(p,i),h.appendChild(p),h.appendChild(d),h}var s=3,o=320,u=100,a=34,f=38,l=4,c=0,h="mscgen_js-svg-",p=0,d={},v={},m=h,g={interEntitySpacing:o,entityWidth:u,entityHeight:a,arcRowHeight:f,arcGradient:c,wordWrapArcs:!1,maxDepth:0,textHeight:12,document:{},layer:{defs:{},lifeline:{},sequence:{},notes:{},inline:{}}},y=[];return{clean:S,renderAST:L}}),n("ui-control/controller-inpage",["../parse/xuparser","../parse/msgennyparser","../render/graphics/renderast","../render/text/textutensils"],function(e,t,n,r){function o(){var e=document.getElementsByClassName("mscgen_js");for(var t=0;t<e.length;t++)f(e[t],t);e=document.getElementsByTagName("mscgen");for(var n=0;n<e.length;n++)f(e[n],n+t)}function u(e,t){return r.formatNumber(t,3)+" "+e}function a(e,t){return e.split("").reduce(function(e,n,r){return r===t?e+"<span style='text-decoration:underline'>"+n+"</span>":e+n},"")}function f(e,t){if(!e.hasAttribute("data-renderedby")){var n=c(e),r=h(e.textContent,n);l(e,t),e.setAttribute("data-renderedby","mscgen_js"),r.entities?p(r,e.id,e.textContent):e.innerHTML=e.textContent.split("\n").reduce(function(e,t,n){return n===r.line-1?e+"<mark>"+u(a(t,r.column-1),n+1)+"\n"+"</mark>":e+u(t,n+1)+"\n"},"<pre><div style='color: red'># ERROR on line "+r.line+", column "+r.column+" - "+r.message+"</div>")+"</pre>"}}function l(e,t){if(""===e.id||null===e.id||undefined===e.id)e.id=i+t.toString()}function c(e){var t=e.getAttribute("data-language");if(undefined===t||null===t)t=s;return t}function h(n,r){var i={};try{"msgenny"===r?i=t.parse(n):"json"===r?i=JSON.parse(n):"xu"===r?i=e.parse(n):i=e.parse(n)}catch(s){return s}return i}function p(e,t,r){document.getElementById(t).innerHTML="",n.clean(t,window),n.renderAST(e,r,t,window)}var i="mscgen_js-parent_",s="mscgen";o()}),t(["ui-control/controller-inpage"],function(e){}),n("mscgen-inpage",function(){})})();